layui.define(function(e){"use strict";var n=function(){this.init()};n.prototype={init:function(){var e=this||m;e._counter=1e3;e._codecs={};e._howls=[];e._muted=false;e._volume=1;e._canPlayEvent="canplaythrough";e._navigator=typeof window!=="undefined"&&window.navigator?window.navigator:null;e.masterGain=null;e.noAudio=false;e.usingWebAudio=true;e.autoSuspend=true;e.ctx=null;e.mobileAutoEnable=true;e._setup();return e},volume:function(e){var n=this||m;e=parseFloat(e);if(!n.ctx){f()}if(typeof e!=="undefined"&&e>=0&&e<=1){n._volume=e;if(n._muted){return n}if(n.usingWebAudio){n.masterGain.gain.setValueAtTime(e,m.ctx.currentTime)}for(var t=0;t<n._howls.length;t++){if(!n._howls[t]._webAudio){var r=n._howls[t]._getSoundIds();for(var o=0;o<r.length;o++){var a=n._howls[t]._soundById(r[o]);if(a&&a._node){a._node.volume=a._volume*e}}}}return n}return n._volume},mute:function(e){var n=this||m;if(!n.ctx){f()}n._muted=e;if(n.usingWebAudio){n.masterGain.gain.setValueAtTime(e?0:n._volume,m.ctx.currentTime)}for(var t=0;t<n._howls.length;t++){if(!n._howls[t]._webAudio){var r=n._howls[t]._getSoundIds();for(var o=0;o<r.length;o++){var a=n._howls[t]._soundById(r[o]);if(a&&a._node){a._node.muted=e?true:a._muted}}}}return n},unload:function(){var e=this||m;for(var n=e._howls.length-1;n>=0;n--){e._howls[n].unload()}if(e.usingWebAudio&&e.ctx&&typeof e.ctx.close!=="undefined"){e.ctx.close();e.ctx=null;f()}return e},codecs:function(e){return(this||m)._codecs[e.replace(/^x-/,"")]},_setup:function(){var n=this||m;n.state=n.ctx?n.ctx.state||"running":"running";n._autoSuspend();if(!n.usingWebAudio){if(typeof Audio!=="undefined"){try{var e=new Audio;if(typeof e.oncanplaythrough==="undefined"){n._canPlayEvent="canplay"}}catch(e){n.noAudio=true}}else{n.noAudio=true}}try{var e=new Audio;if(e.muted){n.noAudio=true}}catch(e){}if(!n.noAudio){n._setupCodecs()}return n},_setupCodecs:function(){var n=this||m;var e=null;try{e=typeof Audio!=="undefined"?new Audio:null}catch(e){return n}if(!e||typeof e.canPlayType!=="function"){return n}var t=e.canPlayType("audio/mpeg;").replace(/^no$/,"");var r=n._navigator&&n._navigator.userAgent.match(/OPR\/([0-6].)/g);var o=r&&parseInt(r[0].split("/")[1],10)<33;n._codecs={mp3:!!(!o&&(t||e.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!t,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")};return n},_enableMobileAudio:function(){var n=this||m;var e=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(n._navigator&&n._navigator.userAgent);var t=!!("ontouchend"in window||n._navigator&&n._navigator.maxTouchPoints>0||n._navigator&&n._navigator.msMaxTouchPoints>0);if(n._mobileEnabled||!n.ctx||!e&&!t){return}n._mobileEnabled=false;if(!n._mobileUnloaded&&n.ctx.sampleRate!==44100){n._mobileUnloaded=true;n.unload()}n._scratchBuffer=n.ctx.createBuffer(1,1,22050);var r=function(){m._autoResume();var e=n.ctx.createBufferSource();e.buffer=n._scratchBuffer;e.connect(n.ctx.destination);if(typeof e.start==="undefined"){e.noteOn(0)}else{e.start(0)}if(typeof n.ctx.resume==="function"){n.ctx.resume()}e.onended=function(){e.disconnect(0);n._mobileEnabled=true;n.mobileAutoEnable=false;document.removeEventListener("touchstart",r,true);document.removeEventListener("touchend",r,true)}};document.addEventListener("touchstart",r,true);document.addEventListener("touchend",r,true);return n},_autoSuspend:function(){var e=this;if(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend==="undefined"||!m.usingWebAudio){return}for(var n=0;n<e._howls.length;n++){if(e._howls[n]._webAudio){for(var t=0;t<e._howls[n]._sounds.length;t++){if(!e._howls[n]._sounds[t]._paused){return e}}}}if(e._suspendTimer){clearTimeout(e._suspendTimer)}e._suspendTimer=setTimeout(function(){if(!e.autoSuspend){return}e._suspendTimer=null;e.state="suspending";e.ctx.suspend().then(function(){e.state="suspended";if(e._resumeAfterSuspend){delete e._resumeAfterSuspend;e._autoResume()}})},3e4);return e},_autoResume:function(){var n=this;if(!n.ctx||typeof n.ctx.resume==="undefined"||!m.usingWebAudio){return}if(n.state==="running"&&n._suspendTimer){clearTimeout(n._suspendTimer);n._suspendTimer=null}else if(n.state==="suspended"){n.ctx.resume().then(function(){n.state="running";for(var e=0;e<n._howls.length;e++){n._howls[e]._emit("resume")}});if(n._suspendTimer){clearTimeout(n._suspendTimer);n._suspendTimer=null}}else if(n.state==="suspending"){n._resumeAfterSuspend=true}return n}};var m=new n;var t=function(e){var n=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}n.init(e)};t.prototype={init:function(e){var n=this;if(!m.ctx){f()}n._autoplay=e.autoplay||false;n._format=typeof e.format!=="string"?e.format:[e.format];n._html5=e.html5||false;n._muted=e.mute||false;n._loop=e.loop||false;n._pool=e.pool||5;n._preload=typeof e.preload==="boolean"?e.preload:true;n._rate=e.rate||1;n._sprite=e.sprite||{};n._src=typeof e.src!=="string"?e.src:[e.src];n._volume=e.volume!==undefined?e.volume:1;n._xhrWithCredentials=e.xhrWithCredentials||false;n._duration=0;n._state="unloaded";n._sounds=[];n._endTimers={};n._queue=[];n._playLock=false;n._onend=e.onend?[{fn:e.onend}]:[];n._onfade=e.onfade?[{fn:e.onfade}]:[];n._onload=e.onload?[{fn:e.onload}]:[];n._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[];n._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[];n._onpause=e.onpause?[{fn:e.onpause}]:[];n._onplay=e.onplay?[{fn:e.onplay}]:[];n._onstop=e.onstop?[{fn:e.onstop}]:[];n._onmute=e.onmute?[{fn:e.onmute}]:[];n._onvolume=e.onvolume?[{fn:e.onvolume}]:[];n._onrate=e.onrate?[{fn:e.onrate}]:[];n._onseek=e.onseek?[{fn:e.onseek}]:[];n._onresume=[];n._webAudio=m.usingWebAudio&&!n._html5;if(typeof m.ctx!=="undefined"&&m.ctx&&m.mobileAutoEnable){m._enableMobileAudio()}m._howls.push(n);if(n._autoplay){n._queue.push({event:"play",action:function(){n.play()}})}if(n._preload){n.load()}return n},load:function(){var e=this;var n=null;if(m.noAudio){e._emit("loaderror",null,"No audio support.");return}if(typeof e._src==="string"){e._src=[e._src]}for(var t=0;t<e._src.length;t++){var r,o;if(e._format&&e._format[t]){r=e._format[t]}else{o=e._src[t];if(typeof o!=="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}r=/^data:audio\/([^;,]+);/i.exec(o);if(!r){r=/\.([^.]+)$/.exec(o.split("?",1)[0])}if(r){r=r[1].toLowerCase()}}if(!r){console.warn('No file extension was found. Consider using the "format" property or specify an extension.')}if(r&&m.codecs(r)){n=e._src[t];break}}if(!n){e._emit("loaderror",null,"No codec support for selected audio sources.");return}e._src=n;e._state="loading";if(window.location.protocol==="https:"&&n.slice(0,5)==="http:"){e._html5=true;e._webAudio=false}new a(e);if(e._webAudio){u(e)}return e},play:function(t,r){var o=this;var e=null;if(typeof t==="number"){e=t;t=null}else if(typeof t==="string"&&o._state==="loaded"&&!o._sprite[t]){return null}else if(typeof t==="undefined"){t="__default";var n=0;for(var a=0;a<o._sounds.length;a++){if(o._sounds[a]._paused&&!o._sounds[a]._ended){n++;e=o._sounds[a]._id}}if(n===1){t=null}else{e=null}}var i=e?o._soundById(e):o._inactiveSound();if(!i){return null}if(e&&!t){t=i._sprite||"__default"}if(o._state!=="loaded"){i._sprite=t;i._ended=false;var u=i._id;o._queue.push({event:"play",action:function(){o.play(u)}});return u}if(e&&!i._paused){if(!r){o._loadQueue("play")}return i._id}if(o._webAudio){m._autoResume()}var d=Math.max(0,i._seek>0?i._seek:o._sprite[t][0]/1e3);var s=Math.max(0,(o._sprite[t][0]+o._sprite[t][1])/1e3-d);var _=s*1e3/Math.abs(i._rate);i._paused=false;i._ended=false;i._sprite=t;i._seek=d;i._start=o._sprite[t][0]/1e3;i._stop=(o._sprite[t][0]+o._sprite[t][1])/1e3;i._loop=!!(i._loop||o._sprite[t][2]);var f=i._node;if(o._webAudio){var l=function(){o._refreshBuffer(i);var e=i._muted||o._muted?0:i._volume;f.gain.setValueAtTime(e,m.ctx.currentTime);i._playStart=m.ctx.currentTime;if(typeof f.bufferSource.start==="undefined"){i._loop?f.bufferSource.noteGrainOn(0,d,86400):f.bufferSource.noteGrainOn(0,d,s)}else{i._loop?f.bufferSource.start(0,d,86400):f.bufferSource.start(0,d,s)}if(_!==Infinity){o._endTimers[i._id]=setTimeout(o._ended.bind(o,i),_)}if(!r){setTimeout(function(){o._emit("play",i._id)},0)}};if(m.state==="running"){l()}else{o.once("resume",l);o._clearTimer(i._id)}}else{var c=function(){f.currentTime=d;f.muted=i._muted||o._muted||m._muted||f.muted;f.volume=i._volume*m.volume();f.playbackRate=i._rate;try{var e=f.play();if(typeof Promise!=="undefined"&&e instanceof Promise){o._playLock=true;var n=function(){o._playLock=false;if(!r){o._emit("play",i._id)}};e.then(n,n)}else if(!r){o._emit("play",i._id)}if(f.paused){o._emit("playerror",i._id,"Playback was unable to start. This is most commonly an issue "+"on mobile devices where playback was not within a user interaction.");return}if(t!=="__default"){o._endTimers[i._id]=setTimeout(o._ended.bind(o,i),_)}else{o._endTimers[i._id]=function(){o._ended(i);f.removeEventListener("ended",o._endTimers[i._id],false)};f.addEventListener("ended",o._endTimers[i._id],false)}}catch(e){o._emit("playerror",i._id,e)}};var p=window&&window.ejecta||!f.readyState&&m._navigator.isCocoonJS;if(f.readyState>=3||p){c()}else{var v=function(){c();f.removeEventListener(m._canPlayEvent,v,false)};f.addEventListener(m._canPlayEvent,v,false);o._clearTimer(i._id)}}return i._id},pause:function(e){var n=this;if(n._state!=="loaded"||n._playLock){n._queue.push({event:"pause",action:function(){n.pause(e)}});return n}var t=n._getSoundIds(e);for(var r=0;r<t.length;r++){n._clearTimer(t[r]);var o=n._soundById(t[r]);if(o&&!o._paused){o._seek=n.seek(t[r]);o._rateSeek=0;o._paused=true;n._stopFade(t[r]);if(o._node){if(n._webAudio){if(!o._node.bufferSource){continue}if(typeof o._node.bufferSource.stop==="undefined"){o._node.bufferSource.noteOff(0)}else{o._node.bufferSource.stop(0)}n._cleanBuffer(o._node)}else if(!isNaN(o._node.duration)||o._node.duration===Infinity){o._node.pause()}}}if(!arguments[1]){n._emit("pause",o?o._id:null)}}return n},stop:function(e,n){var t=this;if(t._state!=="loaded"){t._queue.push({event:"stop",action:function(){t.stop(e)}});return t}var r=t._getSoundIds(e);for(var o=0;o<r.length;o++){t._clearTimer(r[o]);var a=t._soundById(r[o]);if(a){a._seek=a._start||0;a._rateSeek=0;a._paused=true;a._ended=true;t._stopFade(r[o]);if(a._node){if(t._webAudio){if(a._node.bufferSource){if(typeof a._node.bufferSource.stop==="undefined"){a._node.bufferSource.noteOff(0)}else{a._node.bufferSource.stop(0)}t._cleanBuffer(a._node)}}else if(!isNaN(a._node.duration)||a._node.duration===Infinity){a._node.currentTime=a._start||0;a._node.pause()}}if(!n){t._emit("stop",a._id)}}}return t},mute:function(e,n){var t=this;if(t._state!=="loaded"){t._queue.push({event:"mute",action:function(){t.mute(e,n)}});return t}if(typeof n==="undefined"){if(typeof e==="boolean"){t._muted=e}else{return t._muted}}var r=t._getSoundIds(n);for(var o=0;o<r.length;o++){var a=t._soundById(r[o]);if(a){a._muted=e;if(a._interval){t._stopFade(a._id)}if(t._webAudio&&a._node){a._node.gain.setValueAtTime(e?0:a._volume,m.ctx.currentTime)}else if(a._node){a._node.muted=m._muted?true:e}t._emit("mute",a._id)}}return t},volume:function(){var e=this;var n=arguments;var t,r;if(n.length===0){return e._volume}else if(n.length===1||n.length===2&&typeof n[1]==="undefined"){var o=e._getSoundIds();var a=o.indexOf(n[0]);if(a>=0){r=parseInt(n[0],10)}else{t=parseFloat(n[0])}}else if(n.length>=2){t=parseFloat(n[0]);r=parseInt(n[1],10)}var i;if(typeof t!=="undefined"&&t>=0&&t<=1){if(e._state!=="loaded"){e._queue.push({event:"volume",action:function(){e.volume.apply(e,n)}});return e}if(typeof r==="undefined"){e._volume=t}r=e._getSoundIds(r);for(var u=0;u<r.length;u++){i=e._soundById(r[u]);if(i){i._volume=t;if(!n[2]){e._stopFade(r[u])}if(e._webAudio&&i._node&&!i._muted){i._node.gain.setValueAtTime(t,m.ctx.currentTime)}else if(i._node&&!i._muted){i._node.volume=t*m.volume()}e._emit("volume",i._id)}}}else{i=r?e._soundById(r):e._sounds[0];return i?i._volume:0}return e},fade:function(e,n,t,r){var o=this;if(o._state!=="loaded"){o._queue.push({event:"fade",action:function(){o.fade(e,n,t,r)}});return o}o.volume(e,r);var a=o._getSoundIds(r);for(var i=0;i<a.length;i++){var u=o._soundById(a[i]);if(u){if(!r){o._stopFade(a[i])}if(o._webAudio&&!u._muted){var d=m.ctx.currentTime;var s=d+t/1e3;u._volume=e;u._node.gain.setValueAtTime(e,d);u._node.gain.linearRampToValueAtTime(n,s)}o._startFadeInterval(u,e,n,t,a[i],typeof r==="undefined")}}return o},_startFadeInterval:function(n,t,r,o,e,a){var i=this;var u=t;var d=r-t;var s=Math.abs(d/.01);var _=Math.max(4,s>0?o/s:o);var f=Date.now();n._fadeTo=r;n._interval=setInterval(function(){var e=(Date.now()-f)/o;f=Date.now();u+=d*e;u=Math.max(0,u);u=Math.min(1,u);u=Math.round(u*100)/100;if(i._webAudio){n._volume=u}else{i.volume(u,n._id,true)}if(a){i._volume=u}if(r<t&&u<=r||r>t&&u>=r){clearInterval(n._interval);n._interval=null;n._fadeTo=null;i.volume(r,n._id);i._emit("fade",n._id)}},_)},_stopFade:function(e){var n=this;var t=n._soundById(e);if(t&&t._interval){if(n._webAudio){t._node.gain.cancelScheduledValues(m.ctx.currentTime)}clearInterval(t._interval);t._interval=null;n.volume(t._fadeTo,e);t._fadeTo=null;n._emit("fade",e)}return n},loop:function(){var e=this;var n=arguments;var t,r,o;if(n.length===0){return e._loop}else if(n.length===1){if(typeof n[0]==="boolean"){t=n[0];e._loop=t}else{o=e._soundById(parseInt(n[0],10));return o?o._loop:false}}else if(n.length===2){t=n[0];r=parseInt(n[1],10)}var a=e._getSoundIds(r);for(var i=0;i<a.length;i++){o=e._soundById(a[i]);if(o){o._loop=t;if(e._webAudio&&o._node&&o._node.bufferSource){o._node.bufferSource.loop=t;if(t){o._node.bufferSource.loopStart=o._start||0;o._node.bufferSource.loopEnd=o._stop}}}}return e},rate:function(){var e=this;var n=arguments;var t,r;if(n.length===0){r=e._sounds[0]._id}else if(n.length===1){var o=e._getSoundIds();var a=o.indexOf(n[0]);if(a>=0){r=parseInt(n[0],10)}else{t=parseFloat(n[0])}}else if(n.length===2){t=parseFloat(n[0]);r=parseInt(n[1],10)}var i;if(typeof t==="number"){if(e._state!=="loaded"){e._queue.push({event:"rate",action:function(){e.rate.apply(e,n)}});return e}if(typeof r==="undefined"){e._rate=t}r=e._getSoundIds(r);for(var u=0;u<r.length;u++){i=e._soundById(r[u]);if(i){i._rateSeek=e.seek(r[u]);i._playStart=e._webAudio?m.ctx.currentTime:i._playStart;i._rate=t;if(e._webAudio&&i._node&&i._node.bufferSource){i._node.bufferSource.playbackRate.setValueAtTime(t,m.ctx.currentTime)}else if(i._node){i._node.playbackRate=t}var d=e.seek(r[u]);var s=(e._sprite[i._sprite][0]+e._sprite[i._sprite][1])/1e3-d;var _=s*1e3/Math.abs(i._rate);if(e._endTimers[r[u]]||!i._paused){e._clearTimer(r[u]);e._endTimers[r[u]]=setTimeout(e._ended.bind(e,i),_)}e._emit("rate",i._id)}}}else{i=e._soundById(r);return i?i._rate:e._rate}return e},seek:function(){var e=this;var n=arguments;var t,r;if(n.length===0){r=e._sounds[0]._id}else if(n.length===1){var o=e._getSoundIds();var a=o.indexOf(n[0]);if(a>=0){r=parseInt(n[0],10)}else if(e._sounds.length){r=e._sounds[0]._id;t=parseFloat(n[0])}}else if(n.length===2){t=parseFloat(n[0]);r=parseInt(n[1],10)}if(typeof r==="undefined"){return e}if(e._state!=="loaded"){e._queue.push({event:"seek",action:function(){e.seek.apply(e,n)}});return e}var i=e._soundById(r);if(i){if(typeof t==="number"&&t>=0){var u=e.playing(r);if(u){e.pause(r,true)}i._seek=t;i._ended=false;e._clearTimer(r);if(u){e.play(r,true)}if(!e._webAudio&&i._node){i._node.currentTime=t}if(u&&!e._webAudio){var d=function(){if(!e._playLock){e._emit("seek",r)}else{setTimeout(d,0)}};setTimeout(d,0)}else{e._emit("seek",r)}}else{if(e._webAudio){var s=e.playing(r)?m.ctx.currentTime-i._playStart:0;var _=i._rateSeek?i._rateSeek-i._seek:0;return i._seek+(_+s*Math.abs(i._rate))}else{return i._node.currentTime}}}return e},playing:function(e){var n=this;if(typeof e==="number"){var t=n._soundById(e);return t?!t._paused:false}for(var r=0;r<n._sounds.length;r++){if(!n._sounds[r]._paused){return true}}return false},duration:function(e){var n=this;var t=n._duration;var r=n._soundById(e);if(r){t=n._sprite[r._sprite][1]/1e3}return t},state:function(){return this._state},unload:function(){var e=this;var n=e._sounds;for(var t=0;t<n.length;t++){if(!n[t]._paused){e.stop(n[t]._id)}if(!e._webAudio){var r=/MSIE |Trident\//.test(m._navigator&&m._navigator.userAgent);if(!r){n[t]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"}n[t]._node.removeEventListener("error",n[t]._errorFn,false);n[t]._node.removeEventListener(m._canPlayEvent,n[t]._loadFn,false)}delete n[t]._node;e._clearTimer(n[t]._id);var o=m._howls.indexOf(e);if(o>=0){m._howls.splice(o,1)}}var a=true;for(t=0;t<m._howls.length;t++){if(m._howls[t]._src===e._src){a=false;break}}if(i&&a){delete i[e._src]}m.noAudio=false;e._state="unloaded";e._sounds=[];e=null;return null},on:function(e,n,t,r){var o=this;var a=o["_on"+e];if(typeof n==="function"){a.push(r?{id:t,fn:n,once:r}:{id:t,fn:n})}return o},off:function(e,n,t){var r=this;var o=r["_on"+e];var a=0;if(typeof n==="number"){t=n;n=null}if(n||t){for(a=0;a<o.length;a++){var i=t===o[a].id;if(n===o[a].fn&&i||!n&&i){o.splice(a,1);break}}}else if(e){r["_on"+e]=[]}else{var u=Object.keys(r);for(a=0;a<u.length;a++){if(u[a].indexOf("_on")===0&&Array.isArray(r[u[a]])){r[u[a]]=[]}}}return r},once:function(e,n,t){var r=this;r.on(e,n,t,1);return r},_emit:function(e,n,t){var r=this;var o=r["_on"+e];for(var a=o.length-1;a>=0;a--){if(!o[a].id||o[a].id===n||e==="load"){setTimeout(function(e){e.call(this,n,t)}.bind(r,o[a].fn),0);if(o[a].once){r.off(e,o[a].fn,o[a].id)}}}r._loadQueue(e);return r},_loadQueue:function(e){var n=this;if(n._queue.length>0){var t=n._queue[0];if(t.event===e){n._queue.shift();n._loadQueue()}if(!e){t.action()}}return n},_ended:function(e){var n=this;var t=e._sprite;if(!n._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop){setTimeout(n._ended.bind(n,e),100);return n}var r=!!(e._loop||n._sprite[t][2]);n._emit("end",e._id);if(!n._webAudio&&r){n.stop(e._id,true).play(e._id)}if(n._webAudio&&r){n._emit("play",e._id);e._seek=e._start||0;e._rateSeek=0;e._playStart=m.ctx.currentTime;var o=(e._stop-e._start)*1e3/Math.abs(e._rate);n._endTimers[e._id]=setTimeout(n._ended.bind(n,e),o)}if(n._webAudio&&!r){e._paused=true;e._ended=true;e._seek=e._start||0;e._rateSeek=0;n._clearTimer(e._id);n._cleanBuffer(e._node);m._autoSuspend()}if(!n._webAudio&&!r){n.stop(e._id)}return n},_clearTimer:function(e){var n=this;if(n._endTimers[e]){if(typeof n._endTimers[e]!=="function"){clearTimeout(n._endTimers[e])}else{var t=n._soundById(e);if(t&&t._node){t._node.removeEventListener("ended",n._endTimers[e],false)}}delete n._endTimers[e]}return n},_soundById:function(e){var n=this;for(var t=0;t<n._sounds.length;t++){if(e===n._sounds[t]._id){return n._sounds[t]}}return null},_inactiveSound:function(){var e=this;e._drain();for(var n=0;n<e._sounds.length;n++){if(e._sounds[n]._ended){return e._sounds[n].reset()}}return new a(e)},_drain:function(){var e=this;var n=e._pool;var t=0;var r=0;if(e._sounds.length<n){return}for(r=0;r<e._sounds.length;r++){if(e._sounds[r]._ended){t++}}for(r=e._sounds.length-1;r>=0;r--){if(t<=n){return}if(e._sounds[r]._ended){if(e._webAudio&&e._sounds[r]._node){e._sounds[r]._node.disconnect(0)}e._sounds.splice(r,1);t--}}},_getSoundIds:function(e){var n=this;if(typeof e==="undefined"){var t=[];for(var r=0;r<n._sounds.length;r++){t.push(n._sounds[r]._id)}return t}else{return[e]}},_refreshBuffer:function(e){var n=this;e._node.bufferSource=m.ctx.createBufferSource();e._node.bufferSource.buffer=i[n._src];if(e._panner){e._node.bufferSource.connect(e._panner)}else{e._node.bufferSource.connect(e._node)}e._node.bufferSource.loop=e._loop;if(e._loop){e._node.bufferSource.loopStart=e._start||0;e._node.bufferSource.loopEnd=e._stop}e._node.bufferSource.playbackRate.setValueAtTime(e._rate,m.ctx.currentTime);return n},_cleanBuffer:function(e){var n=this;if(m._scratchBuffer){e.bufferSource.onended=null;e.bufferSource.disconnect(0);try{e.bufferSource.buffer=m._scratchBuffer}catch(e){}}e.bufferSource=null;return n}};var a=function(e){this._parent=e;this.init()};a.prototype={init:function(){var e=this;var n=e._parent;e._muted=n._muted;e._loop=n._loop;e._volume=n._volume;e._rate=n._rate;e._seek=0;e._paused=true;e._ended=true;e._sprite="__default";e._id=++m._counter;n._sounds.push(e);e.create();return e},create:function(){var e=this;var n=e._parent;var t=m._muted||e._muted||e._parent._muted?0:e._volume;if(n._webAudio){e._node=typeof m.ctx.createGain==="undefined"?m.ctx.createGainNode():m.ctx.createGain();e._node.gain.setValueAtTime(t,m.ctx.currentTime);e._node.paused=true;e._node.connect(m.masterGain)}else{e._node=new Audio;e._errorFn=e._errorListener.bind(e);e._node.addEventListener("error",e._errorFn,false);e._loadFn=e._loadListener.bind(e);e._node.addEventListener(m._canPlayEvent,e._loadFn,false);e._node.src=n._src;e._node.preload="auto";e._node.volume=t*m.volume();e._node.load()}return e},reset:function(){var e=this;var n=e._parent;e._muted=n._muted;e._loop=n._loop;e._volume=n._volume;e._rate=n._rate;e._seek=0;e._rateSeek=0;e._paused=true;e._ended=true;e._sprite="__default";e._id=++m._counter;return e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0);e._node.removeEventListener("error",e._errorFn,false)},_loadListener:function(){var e=this;var n=e._parent;n._duration=Math.ceil(e._node.duration*10)/10;if(Object.keys(n._sprite).length===0){n._sprite={__default:[0,n._duration*1e3]}}if(n._state!=="loaded"){n._state="loaded";n._emit("load");n._loadQueue()}e._node.removeEventListener(m._canPlayEvent,e._loadFn,false)}};var i={};var u=function(n){var e=n._src;if(i[e]){n._duration=i[e].duration;_(n);return}if(/^data:[^;]+;base64,/.test(e)){var t=atob(e.split(",")[1]);var r=new Uint8Array(t.length);for(var o=0;o<t.length;++o){r[o]=t.charCodeAt(o)}s(r.buffer,n)}else{var a=new XMLHttpRequest;a.open("GET",e,true);a.withCredentials=n._xhrWithCredentials;a.responseType="arraybuffer";a.onload=function(){var e=(a.status+"")[0];if(e!=="0"&&e!=="2"&&e!=="3"){n._emit("loaderror",null,"Failed loading audio file with status: "+a.status+".");return}s(a.response,n)};a.onerror=function(){if(n._webAudio){n._html5=true;n._webAudio=false;n._sounds=[];delete i[e];n.load()}};d(a)}};var d=function(n){try{n.send()}catch(e){n.onerror()}};var s=function(e,n){m.ctx.decodeAudioData(e,function(e){if(e&&n._sounds.length>0){i[n._src]=e;_(n,e)}},function(){n._emit("loaderror",null,"Decoding audio data failed.")})};var _=function(e,n){if(n&&!e._duration){e._duration=n.duration}if(Object.keys(e._sprite).length===0){e._sprite={__default:[0,e._duration*1e3]}}if(e._state!=="loaded"){e._state="loaded";e._emit("load");e._loadQueue()}};var f=function(){try{if(typeof AudioContext!=="undefined"){m.ctx=new AudioContext}else if(typeof webkitAudioContext!=="undefined"){m.ctx=new webkitAudioContext}else{m.usingWebAudio=false}}catch(e){m.usingWebAudio=false}var e=/iP(hone|od|ad)/.test(m._navigator&&m._navigator.platform);var n=m._navigator&&m._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);var t=n?parseInt(n[1],10):null;if(e&&t&&t<9){var r=/safari/.test(m._navigator&&m._navigator.userAgent.toLowerCase());if(m._navigator&&m._navigator.standalone&&!r||m._navigator&&!m._navigator.standalone&&!r){m.usingWebAudio=false}}if(m.usingWebAudio){m.masterGain=typeof m.ctx.createGain==="undefined"?m.ctx.createGainNode():m.ctx.createGain();m.masterGain.gain.setValueAtTime(m._muted?0:1,m.ctx.currentTime);m.masterGain.connect(m.ctx.destination)}m._setup()};if(typeof define==="function"&&define.amd){define([],function(){return{Howler:m,Howl:t}})}if(typeof e!=="undefined"){e.Howler=m;e.Howl=t}if(typeof window!=="undefined"){window.HowlerGlobal=n;window.Howler=m;window.Howl=t;window.Sound=a}else if(typeof global!=="undefined"){global.HowlerGlobal=n;global.Howler=m;global.Howl=t;global.Sound=a}n.prototype._pos=[0,0,0];n.prototype._orientation=[0,0,-1,0,1,0];n.prototype.stereo=function(e){var n=this;if(!n.ctx||!n.ctx.listener){return n}for(var t=n._howls.length-1;t>=0;t--){n._howls[t].stereo(e)}return n};n.prototype.pos=function(e,n,t){var r=this;if(!r.ctx||!r.ctx.listener){return r}n=typeof n!=="number"?r._pos[1]:n;t=typeof t!=="number"?r._pos[2]:t;if(typeof e==="number"){r._pos=[e,n,t];r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2])}else{return r._pos}return r};n.prototype.orientation=function(e,n,t,r,o,a){var i=this;if(!i.ctx||!i.ctx.listener){return i}var u=i._orientation;n=typeof n!=="number"?u[1]:n;t=typeof t!=="number"?u[2]:t;r=typeof r!=="number"?u[3]:r;o=typeof o!=="number"?u[4]:o;a=typeof a!=="number"?u[5]:a;if(typeof e==="number"){i._orientation=[e,n,t,r,o,a];i.ctx.listener.setOrientation(e,n,t,r,o,a)}else{return u}return i};t.prototype.init=function(t){return function(e){var n=this;n._orientation=e.orientation||[1,0,0];n._stereo=e.stereo||null;n._pos=e.pos||null;n._pannerAttr={coneInnerAngle:typeof e.coneInnerAngle!=="undefined"?e.coneInnerAngle:360,coneOuterAngle:typeof e.coneOuterAngle!=="undefined"?e.coneOuterAngle:360,coneOuterGain:typeof e.coneOuterGain!=="undefined"?e.coneOuterGain:0,distanceModel:typeof e.distanceModel!=="undefined"?e.distanceModel:"inverse",maxDistance:typeof e.maxDistance!=="undefined"?e.maxDistance:1e4,panningModel:typeof e.panningModel!=="undefined"?e.panningModel:"HRTF",refDistance:typeof e.refDistance!=="undefined"?e.refDistance:1,rolloffFactor:typeof e.rolloffFactor!=="undefined"?e.rolloffFactor:1};n._onstereo=e.onstereo?[{fn:e.onstereo}]:[];n._onpos=e.onpos?[{fn:e.onpos}]:[];n._onorientation=e.onorientation?[{fn:e.onorientation}]:[];return t.call(this,e)}}(t.prototype.init);t.prototype.stereo=function(e,n){var t=this;if(!t._webAudio){return t}if(t._state!=="loaded"){t._queue.push({event:"stereo",action:function(){t.stereo(e,n)}});return t}var r=typeof m.ctx.createStereoPanner==="undefined"?"spatial":"stereo";if(typeof n==="undefined"){if(typeof e==="number"){t._stereo=e;t._pos=[e,0,0]}else{return t._stereo}}var o=t._getSoundIds(n);for(var a=0;a<o.length;a++){var i=t._soundById(o[a]);if(i){if(typeof e==="number"){i._stereo=e;i._pos=[e,0,0];if(i._node){i._pannerAttr.panningModel="equalpower";if(!i._panner||!i._panner.pan){l(i,r)}if(r==="spatial"){i._panner.setPosition(e,0,0)}else{i._panner.pan.setValueAtTime(e,m.ctx.currentTime)}}t._emit("stereo",i._id)}else{return i._stereo}}}return t};t.prototype.pos=function(e,n,t,r){var o=this;if(!o._webAudio){return o}if(o._state!=="loaded"){o._queue.push({event:"pos",action:function(){o.pos(e,n,t,r)}});return o}n=typeof n!=="number"?0:n;t=typeof t!=="number"?-.5:t;if(typeof r==="undefined"){if(typeof e==="number"){o._pos=[e,n,t]}else{return o._pos}}var a=o._getSoundIds(r);for(var i=0;i<a.length;i++){var u=o._soundById(a[i]);if(u){if(typeof e==="number"){u._pos=[e,n,t];if(u._node){if(!u._panner||u._panner.pan){l(u,"spatial")}u._panner.setPosition(e,n,t)}o._emit("pos",u._id)}else{return u._pos}}}return o};t.prototype.orientation=function(e,n,t,r){var o=this;if(!o._webAudio){return o}if(o._state!=="loaded"){o._queue.push({event:"orientation",action:function(){o.orientation(e,n,t,r)}});return o}n=typeof n!=="number"?o._orientation[1]:n;t=typeof t!=="number"?o._orientation[2]:t;if(typeof r==="undefined"){if(typeof e==="number"){o._orientation=[e,n,t]}else{return o._orientation}}var a=o._getSoundIds(r);for(var i=0;i<a.length;i++){var u=o._soundById(a[i]);if(u){if(typeof e==="number"){u._orientation=[e,n,t];if(u._node){if(!u._panner){if(!u._pos){u._pos=o._pos||[0,0,-.5]}l(u,"spatial")}u._panner.setOrientation(e,n,t)}o._emit("orientation",u._id)}else{return u._orientation}}}return o};t.prototype.pannerAttr=function(){var e=this;var n=arguments;var t,r,o;if(!e._webAudio){return e}if(n.length===0){return e._pannerAttr}else if(n.length===1){if(typeof n[0]==="object"){t=n[0];if(typeof r==="undefined"){if(!t.pannerAttr){t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}}e._pannerAttr={coneInnerAngle:typeof t.pannerAttr.coneInnerAngle!=="undefined"?t.pannerAttr.coneInnerAngle:e._coneInnerAngle,coneOuterAngle:typeof t.pannerAttr.coneOuterAngle!=="undefined"?t.pannerAttr.coneOuterAngle:e._coneOuterAngle,coneOuterGain:typeof t.pannerAttr.coneOuterGain!=="undefined"?t.pannerAttr.coneOuterGain:e._coneOuterGain,distanceModel:typeof t.pannerAttr.distanceModel!=="undefined"?t.pannerAttr.distanceModel:e._distanceModel,maxDistance:typeof t.pannerAttr.maxDistance!=="undefined"?t.pannerAttr.maxDistance:e._maxDistance,refDistance:typeof t.pannerAttr.refDistance!=="undefined"?t.pannerAttr.refDistance:e._refDistance,rolloffFactor:typeof t.pannerAttr.rolloffFactor!=="undefined"?t.pannerAttr.rolloffFactor:e._rolloffFactor,panningModel:typeof t.pannerAttr.panningModel!=="undefined"?t.pannerAttr.panningModel:e._panningModel}}}else{o=e._soundById(parseInt(n[0],10));return o?o._pannerAttr:e._pannerAttr}}else if(n.length===2){t=n[0];r=parseInt(n[1],10)}var a=e._getSoundIds(r);for(var i=0;i<a.length;i++){o=e._soundById(a[i]);if(o){var u=o._pannerAttr;u={coneInnerAngle:typeof t.coneInnerAngle!=="undefined"?t.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:typeof t.coneOuterAngle!=="undefined"?t.coneOuterAngle:u.coneOuterAngle,coneOuterGain:typeof t.coneOuterGain!=="undefined"?t.coneOuterGain:u.coneOuterGain,distanceModel:typeof t.distanceModel!=="undefined"?t.distanceModel:u.distanceModel,maxDistance:typeof t.maxDistance!=="undefined"?t.maxDistance:u.maxDistance,refDistance:typeof t.refDistance!=="undefined"?t.refDistance:u.refDistance,rolloffFactor:typeof t.rolloffFactor!=="undefined"?t.rolloffFactor:u.rolloffFactor,panningModel:typeof t.panningModel!=="undefined"?t.panningModel:u.panningModel};var d=o._panner;if(d){d.coneInnerAngle=u.coneInnerAngle;d.coneOuterAngle=u.coneOuterAngle;d.coneOuterGain=u.coneOuterGain;d.distanceModel=u.distanceModel;d.maxDistance=u.maxDistance;d.refDistance=u.refDistance;d.rolloffFactor=u.rolloffFactor;d.panningModel=u.panningModel}else{if(!o._pos){o._pos=e._pos||[0,0,-.5]}l(o,"spatial")}}}return e};a.prototype.init=function(t){return function(){var e=this;var n=e._parent;e._orientation=n._orientation;e._stereo=n._stereo;e._pos=n._pos;e._pannerAttr=n._pannerAttr;t.call(this);if(e._stereo){n.stereo(e._stereo)}else if(e._pos){n.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}}(a.prototype.init);a.prototype.reset=function(t){return function(){var e=this;var n=e._parent;e._orientation=n._orientation;e._pos=n._pos;e._pannerAttr=n._pannerAttr;return t.call(this)}}(a.prototype.reset);var l=function(e,n){n=n||"spatial";if(n==="spatial"){e._panner=m.ctx.createPanner();e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle;e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle;e._panner.coneOuterGain=e._pannerAttr.coneOuterGain;e._panner.distanceModel=e._pannerAttr.distanceModel;e._panner.maxDistance=e._pannerAttr.maxDistance;e._panner.refDistance=e._pannerAttr.refDistance;e._panner.rolloffFactor=e._pannerAttr.rolloffFactor;e._panner.panningModel=e._pannerAttr.panningModel;e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]);e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])}else{e._panner=m.ctx.createStereoPanner();e._panner.pan.setValueAtTime(e._stereo,m.ctx.currentTime)}e._panner.connect(e._node);if(!e._paused){e._parent.pause(e._id,true).play(e._id,true)}};e("howler",{})});
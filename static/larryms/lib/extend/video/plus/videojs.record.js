(function e(t,r){if(typeof exports==="object"&&typeof module==="object")module.exports=r(require("videojs"));else if(typeof define==="function"&&define.amd)define("VideojsRecord",["videojs"],r);else if(typeof exports==="object")exports["VideojsRecord"]=r(require("videojs"));else t["VideojsRecord"]=r(t["videojs"])})(window,function(r){return function(r){var i={};function o(e){if(i[e]){return i[e].exports}var t=i[e]={i:e,l:false,exports:{}};r[e].call(t.exports,t,t.exports,o);t.l=true;return t.exports}o.m=r;o.c=i;o.d=function(e,t,r){if(!o.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:r})}};o.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};o.t=function(t,e){if(e&1)t=o(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var r=Object.create(null);o.r(r);Object.defineProperty(r,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var i in t)o.d(r,i,function(e){return t[e]}.bind(null,i));return r};o.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};o.d(e,"a",e);return e};o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};o.p="";return o(o.s=0)}({"./node_modules/global/window.js":function(r,e,t){(function(e){var t;if(typeof window!=="undefined"){t=window}else if(typeof e!=="undefined"){t=e}else if(typeof self!=="undefined"){t=self}else{t={}}r.exports=t}).call(this,t("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(1,eval)("this")}catch(e){if(typeof window==="object")r=window}e.exports=r},"./src/css/videojs.record.scss":function(e,t,r){},"./src/js/controls/animation-display.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var o=function e(t,r,i){if(t===null)t=Function.prototype;var o=Object.getOwnPropertyDescriptor(t,r);if(o===undefined){var n=Object.getPrototypeOf(t);if(n===null){return undefined}else{return e(n,r,i)}}else if("value"in o){return o.value}else{var a=o.get;if(a===undefined){return undefined}return a.call(i)}};function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=videojs.getComponent("Component");var c=function(e){s(t,e);function t(){n(this,t);return a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}i(t,[{key:"createEl",value:function e(){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-animation-display",innerHTML:"<img />"})}}]);return t}(u);u.registerComponent("AnimationDisplay",c);t.default=c;e.exports=t["default"]},"./src/js/controls/camera-button.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var o=function e(t,r,i){if(t===null)t=Function.prototype;var o=Object.getOwnPropertyDescriptor(t,r);if(o===undefined){var n=Object.getPrototypeOf(t);if(n===null){return undefined}else{return e(n,r,i)}}else if("value"in o){return o.value}else{var a=o.get;if(a===undefined){return undefined}return a.call(i)}};function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=videojs.getComponent("Button");var c=videojs.getComponent("Component");var l=function(e){s(t,e);function t(){n(this,t);return a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}i(t,[{key:"buildCSSClass",value:function e(){return"vjs-camera-button vjs-control vjs-button vjs-icon-photo-camera"}},{key:"enable",value:function e(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enable",this).call(this);this.on(this.player_,"startRecord",this.onStart);this.on(this.player_,"stopRecord",this.onStop)}},{key:"disable",value:function e(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disable",this).call(this);this.off(this.player_,"startRecord",this.onStart);this.off(this.player_,"stopRecord",this.onStop)}},{key:"handleClick",value:function e(t){var r=this.player_.record();if(!r.isProcessing()){r.start()}else{r.retrySnapshot();this.onStop()}}},{key:"onStart",value:function e(t){this.removeClass("vjs-icon-photo-camera");this.addClass("vjs-icon-replay");this.controlText("Retry")}},{key:"onStop",value:function e(t){this.removeClass("vjs-icon-replay");this.addClass("vjs-icon-photo-camera");this.controlText("Image")}}]);return t}(u);l.prototype.controlText_="Image";c.registerComponent("CameraButton",l);t.default=l;e.exports=t["default"]},"./src/js/controls/device-button.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function n(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function a(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var s=videojs.getComponent("Button");var u=videojs.getComponent("Component");var c=function(e){a(t,e);function t(){o(this,t);return n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}i(t,[{key:"handleClick",value:function e(t){this.player_.record().getDevice()}}]);return t}(s);c.prototype.controlText_="Device";u.registerComponent("DeviceButton",c);t.default=c;e.exports=t["default"]},"./src/js/controls/record-canvas.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var o=function e(t,r,i){if(t===null)t=Function.prototype;var o=Object.getOwnPropertyDescriptor(t,r);if(o===undefined){var n=Object.getPrototypeOf(t);if(n===null){return undefined}else{return e(n,r,i)}}else if("value"in o){return o.value}else{var a=o.get;if(a===undefined){return undefined}return a.call(i)}};function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=videojs.getComponent("Component");var c=function(e){s(t,e);function t(){n(this,t);return a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}i(t,[{key:"createEl",value:function e(){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-record-canvas",innerHTML:"<canvas></canvas>"})}}]);return t}(u);u.registerComponent("RecordCanvas",c);t.default=c;e.exports=t["default"]},"./src/js/controls/record-indicator.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var o=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=function e(t,r,i){if(t===null)t=Function.prototype;var o=Object.getOwnPropertyDescriptor(t,r);if(o===undefined){var n=Object.getPrototypeOf(t);if(n===null){return undefined}else{return e(n,r,i)}}else if("value"in o){return o.value}else{var a=o.get;if(a===undefined){return undefined}return a.call(i)}};function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var i=videojs.getComponent("Component");var c=function(e){u(i,e);function i(e,t){a(this,i);var r=s(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));r.enable();return r}o(i,[{key:"createEl",value:function e(){return n(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"createEl",this).call(this,"div",{className:"vjs-record-indicator vjs-control",dir:"ltr"})}},{key:"enable",value:function e(){this.on(this.player_,"startRecord",this.show);this.on(this.player_,"stopRecord",this.hide)}},{key:"disable",value:function e(){this.off(this.player_,"startRecord",this.show);this.off(this.player_,"stopRecord",this.hide)}}]);return i}(i);i.registerComponent("RecordIndicator",c);t.default=c;e.exports=t["default"]},"./src/js/controls/record-toggle.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var o=function e(t,r,i){if(t===null)t=Function.prototype;var o=Object.getOwnPropertyDescriptor(t,r);if(o===undefined){var n=Object.getPrototypeOf(t);if(n===null){return undefined}else{return e(n,r,i)}}else if("value"in o){return o.value}else{var a=o.get;if(a===undefined){return undefined}return a.call(i)}};function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=videojs.getComponent("Button");var c=videojs.getComponent("Component");var l=function(e){s(t,e);function t(){n(this,t);return a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}i(t,[{key:"buildCSSClass",value:function e(){return"vjs-record-button vjs-control vjs-button vjs-icon-record-start"}},{key:"enable",value:function e(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enable",this).call(this);this.on(this.player_,"startRecord",this.onStart);this.on(this.player_,"stopRecord",this.onStop)}},{key:"disable",value:function e(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disable",this).call(this);this.off(this.player_,"startRecord",this.onStart);this.off(this.player_,"stopRecord",this.onStop)}},{key:"handleClick",value:function e(t){var r=this.player_.record();if(!r.isRecording()){r.start()}else{r.stop()}}},{key:"onStart",value:function e(t){this.removeClass("vjs-icon-record-start");this.addClass("vjs-icon-record-stop");this.controlText("Stop")}},{key:"onStop",value:function e(t){this.removeClass("vjs-icon-record-stop");this.addClass("vjs-icon-record-start");this.controlText("Record")}}]);return t}(u);l.prototype.controlText_="Record";c.registerComponent("RecordToggle",l);t.default=l;e.exports=t["default"]},"./src/js/defaults.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i={image:false,audio:false,video:false,animation:false,maxLength:10,frameWidth:320,frameHeight:240,debug:false,autoMuteDevice:false,videoMimeType:"video/webm",videoRecorderType:"auto",audioEngine:"recordrtc",audioRecorderType:"auto",audioMimeType:"auto",audioBufferSize:4096,audioSampleRate:44100,audioBitRate:128,audioChannels:2,audioWorkerURL:"",animationFrameRate:200,animationQuality:10,timeSlice:0};t.default=i;e.exports=t["default"]},"./src/js/engine/record-engine.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function n(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function a(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var s=videojs.getComponent("Component");var u="recordrtc";var c="libvorbis.js";var l="recorder.js";var d="lamejs";var f="opus-recorder";var p=function(e){a(r,e);function r(e,t){o(this,r);t.evented=true;return n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t))}i(r,[{key:"dispose",value:function e(){if(this.recordedData!==undefined){URL.revokeObjectURL(this.recordedData)}}},{key:"addFileInfo",value:function e(t){if(t instanceof Blob||t instanceof File){var r=new Date;try{t.lastModified=r.getTime();t.lastModifiedDate=r}catch(e){if(e instanceof TypeError){}else{throw e}}var i="."+t.type.split("/")[1];if(i.indexOf(";")>-1){i=i.split(";")[0]}try{t.name=r.getTime()+i}catch(e){if(e instanceof TypeError){}else{throw e}}}}},{key:"onStopRecording",value:function e(t){this.recordedData=t;this.addFileInfo(this.recordedData);this.dispose();this.trigger("recordComplete")}},{key:"saveAs",value:function e(t){var r=t[Object.keys(t)[0]];if(typeof navigator.msSaveOrOpenBlob!=="undefined"){return navigator.msSaveOrOpenBlob(this.recordedData,r)}else if(typeof navigator.msSaveBlob!=="undefined"){return navigator.msSaveBlob(this.recordedData,r)}var i=document.createElement("a");i.href=URL.createObjectURL(this.recordedData);i.download=r;i.style="display:none;opacity:0;color:transparent;";(document.body||document.documentElement).appendChild(i);if(typeof i.click==="function"){i.click()}else{i.target="_blank";i.dispatchEvent(new MouseEvent("click",{view:window,bubbles:true,cancelable:true}))}URL.revokeObjectURL(i.href)}}]);return r}(s);videojs.RecordEngine=p;s.registerComponent("RecordEngine",p);t.RecordEngine=p;t.RECORDRTC=u;t.LIBVORBISJS=c;t.RECORDERJS=l;t.LAMEJS=d;t.OPUSRECORDER=f},"./src/js/engine/record-mode.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n="image_only";var a="audio_only";var s="video_only";var u="audio_video";var c="animation";var i=function e(t,r,i,o){if(l(t)){return n}else if(l(o)){return c}else if(l(r)&&!l(i)){return a}else if(l(r)&&l(i)){return u}else if(!l(r)&&l(i)){return s}};var l=function e(t){return t===Object(t)||t===true};t.getRecorderMode=i;t.IMAGE_ONLY=n;t.AUDIO_ONLY=a;t.VIDEO_ONLY=s;t.AUDIO_VIDEO=u;t.ANIMATION=c},"./src/js/engine/record-rtc.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var o=function e(t,r,i){if(t===null)t=Function.prototype;var o=Object.getOwnPropertyDescriptor(t,r);if(o===undefined){var n=Object.getPrototypeOf(t);if(n===null){return undefined}else{return e(n,r,i)}}else if("value"in o){return o.value}else{var a=o.get;if(a===undefined){return undefined}return a.call(i)}};var n=r("./src/js/engine/record-engine.js");var a=r("./src/js/utils/detect-browser.js");var s=r("./src/js/engine/record-mode.js");function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var d=videojs.getComponent("Component");var f=function(e){l(t,e);function t(){u(this,t);return c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}i(t,[{key:"setup",value:function e(t,r,i){this.inputStream=t;this.mediaType=r;this.debug=i;this.engine=new RecordRTC.MRecordRTC;this.engine.mediaType=this.mediaType;this.engine.disableLogs=!this.debug;this.engine.mimeType=this.mimeType;this.engine.bufferSize=this.bufferSize;this.engine.sampleRate=this.sampleRate;this.engine.numberOfAudioChannels=this.audioChannels;this.engine.video=this.video;this.engine.canvas=this.canvas;this.engine.quality=this.quality;this.engine.frameRate=this.frameRate;if(this.onTimeStamp!==undefined){this.engine.timeSlice=this.timeSlice;this.engine.onTimeStamp=this.onTimeStamp}this.engine.addStream(this.inputStream)}},{key:"dispose",value:function e(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this);if(typeof this.engine.destroy==="function"){this.engine.destroy()}}},{key:"start",value:function e(){this.engine.startRecording()}},{key:"stop",value:function e(){this.engine.stopRecording(this.onStopRecording.bind(this))}},{key:"pause",value:function e(){this.engine.pauseRecording()}},{key:"resume",value:function e(){this.engine.resumeRecording()}},{key:"saveAs",value:function e(t){if(this.engine&&t!==undefined){this.engine.save(t)}}},{key:"onStopRecording",value:function e(t,r){var i=this;this.mediaURL=t;var o=this.player().record().getRecordType();this.engine.getBlob(function(e){switch(o){case s.AUDIO_ONLY:i.recordedData=e.audio;i.addFileInfo(i.recordedData);i.trigger("recordComplete");break;case s.VIDEO_ONLY:case s.AUDIO_VIDEO:if(e.video!==undefined){i.recordedData=e.video;if(o===s.AUDIO_VIDEO&&(0,a.isChrome)()){i.recordedData=e;for(var t in i.recordedData){i.addFileInfo(i.recordedData[t])}}else{i.addFileInfo(i.recordedData)}i.trigger("recordComplete")}break;case s.ANIMATION:i.recordedData=e.gif;i.addFileInfo(i.recordedData);i.trigger("recordComplete");break}})}}]);return t}(n.RecordEngine);videojs.RecordRTCEngine=f;d.registerComponent("RecordRTCEngine",f);t.default=f;e.exports=t["default"]},"./src/js/utils/browser-shim.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=function t(r,i,e){if("createObjectURL"in URL&&!e){try{i.src=URL.createObjectURL(r)}catch(e){t(r,i,true);return}}else if("srcObject"in i){i.srcObject=r}else if("mozSrcObject"in i){i.mozSrcObject=r}else{console.log("createObjectURL/srcObject both are not supported.")}};t.default=i;e.exports=t["default"]},"./src/js/utils/detect-browser.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isSafari=t.isChrome=t.isOpera=t.isEdge=t.detectBrowser=undefined;var i=r("./node_modules/global/window.js");var o=n(i);function n(e){return e&&e.__esModule?e:{default:e}}var a=function e(){var t={};t.browser=null;t.version=null;t.minVersion=null;if(typeof o.default==="undefined"||!o.default.navigator){t.browser="Not a supported browser.";return t}if(navigator.mozGetUserMedia){t.browser="firefox";t.version=s(navigator.userAgent,/Firefox\/(\d+)\./,1);t.minVersion=31}else if(navigator.webkitGetUserMedia){t.browser="chrome";t.version=s(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2);t.minVersion=38}else if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)){t.browser="edge";t.version=s(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2);t.minVersion=10547}else if(o.default.RTCPeerConnection&&navigator.userAgent.match(/AppleWebKit\/(\d+)\./)){t.browser="safari";t.version=s(navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}else{t.browser="Not a supported browser.";return t}return t};var s=function e(t,r,i){var o=t.match(r);return o&&o.length>=i&&parseInt(o[i],10)};var u=function e(){return a().browser==="edge"};var c=function e(){return a().browser==="safari"};var l=function e(){return!!o.default.opera||navigator.userAgent.indexOf("OPR/")!==-1};var d=function e(){return a().browser==="chrome"};t.detectBrowser=a;t.isEdge=u;t.isOpera=l;t.isChrome=d;t.isSafari=c},"./src/js/utils/format-time.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=function e(t,r,i){t=t<0?0:t;r=r||t;var o=Math.floor(t%60),n=Math.floor(t/60%60),a=Math.floor(t/3600),s=Math.floor(r/60%60),u=Math.floor(r/3600),c=Math.floor((t-o)*1e3);if(isNaN(t)||t===Infinity){a=n=o=c="-"}if(r>0&&r<i){if(c<100){if(c<10){c="00"+c}else{c="0"+c}}c=":"+c}else{c=""}a=a>0||u>0?a+":":"";n=((a||s>=10)&&n<10?"0"+n:n)+":";o=o<10?"0"+o:o;return a+n+o+c};t.default=i;e.exports=t["default"]},"./src/js/videojs.record.js":function(e,t,r){"use strict";var s=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}}();var n=function e(t,r,i){if(t===null)t=Function.prototype;var o=Object.getOwnPropertyDescriptor(t,r);if(o===undefined){var n=Object.getPrototypeOf(t);if(n===null){return undefined}else{return e(n,r,i)}}else if("value"in o){return o.value}else{var a=o.get;if(a===undefined){return undefined}return a.call(i)}};var o=r("./src/js/controls/animation-display.js");var a=S(o);var u=r("./src/js/controls/record-canvas.js");var c=S(u);var l=r("./src/js/controls/device-button.js");var d=S(l);var f=r("./src/js/controls/camera-button.js");var p=S(f);var h=r("./src/js/controls/record-toggle.js");var y=S(h);var v=r("./src/js/controls/record-indicator.js");var g=S(v);var m=r("./src/js/defaults.js");var b=S(m);var O=r("./src/js/utils/format-time.js");var _=S(O);var j=r("./src/js/utils/browser-shim.js");var w=S(j);var R=r("./src/js/utils/detect-browser.js");var T=r("./src/js/engine/record-rtc.js");var D=S(T);var k=r("./src/js/engine/record-engine.js");var C=r("./src/js/engine/record-mode.js");var E=r("video.js");var I=S(E);function S(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function P(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function N(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var M=I.default.getPlugin("plugin");var L=I.default.getComponent("Player");var B="auto";L.prototype.play=function e(){var t=this.techGet_("play");if(t!==undefined&&typeof t.then==="function"){t.then(null,function(e){})}return t};var U=function(e){N(o,e);function o(e,t){A(this,o);var r=P(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t));e.addClass("vjs-record");r.loadOptions();r.resetState();var i="av-perm";switch(r.getRecordType()){case C.IMAGE_ONLY:case C.VIDEO_ONLY:case C.ANIMATION:i="video-perm";break;case C.AUDIO_ONLY:i="audio-perm";break}d.default.prototype.buildCSSClass=function(){return"vjs-record vjs-device-button vjs-control vjs-icon-"+i};e.deviceButton=new d.default(e,t);e.addChild(e.deviceButton);e.recordIndicator=new g.default(e,t);e.recordIndicator.hide();e.addChild(e.recordIndicator);e.recordCanvas=new c.default(e,t);e.recordCanvas.hide();e.addChild(e.recordCanvas);e.animationDisplay=new a.default(e,t);e.animationDisplay.hide();e.addChild(e.animationDisplay);e.cameraButton=new p.default(e,t);e.cameraButton.hide();e.recordToggle=new y.default(e,t);e.recordToggle.hide();r.player.one("ready",r.setupUI.bind(r));return r}i(o,[{key:"loadOptions",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=I.default.mergeOptions(b.default,this.player.options_.plugins.record,t);this.recordImage=r.image;this.recordAudio=r.audio;this.recordVideo=r.video;this.recordAnimation=r.animation;this.maxLength=r.maxLength;this.debug=r.debug;this.recordTimeSlice=r.timeSlice;this.autoMuteDevice=r.autoMuteDevice;this.videoFrameWidth=r.frameWidth;this.videoFrameHeight=r.frameHeight;this.videoRecorderType=r.videoRecorderType;this.videoMimeType=r.videoMimeType;this.audioEngine=r.audioEngine;this.audioRecorderType=r.audioRecorderType;this.audioWorkerURL=r.audioWorkerURL;this.audioBufferSize=r.audioBufferSize;this.audioSampleRate=r.audioSampleRate;this.audioBitRate=r.audioBitRate;this.audioChannels=r.audioChannels;this.audioMimeType=r.audioMimeType;this.animationFrameRate=r.animationFrameRate;this.animationQuality=r.animationQuality}},{key:"setupUI",value:function e(){var t=this;this.player.controlBar.addChild(this.player.cameraButton);this.player.controlBar.el().insertBefore(this.player.cameraButton.el(),this.player.controlBar.el().firstChild);this.player.controlBar.el().insertBefore(this.player.recordToggle.el(),this.player.controlBar.el().firstChild);if(this.player.controlBar.remainingTimeDisplay!==undefined){this.player.controlBar.remainingTimeDisplay.el().style.display="none"}if(this.player.controlBar.liveDisplay!==undefined){this.player.controlBar.liveDisplay.el().style.display="none"}this.player.loop(false);switch(this.getRecordType()){case C.AUDIO_ONLY:this.surfer=this.player.wavesurfer();break;case C.IMAGE_ONLY:case C.VIDEO_ONLY:case C.AUDIO_VIDEO:case C.ANIMATION:this.player.bigPlayButton.hide();this.player.one("loadedmetadata",function(){t.setDuration(t.maxLength)});if(this.player.usingNativeControls_===true){if(this.player.tech_.el_!==undefined){this.player.tech_.el_.controls=false}}this.player.removeTechControlsListeners_();if(this.player.options_.controls){this.player.controlBar.progressControl.hide();this.player.on("userinactive",function(e){t.player.userActive(true)});this.player.controlBar.show();this.player.controlBar.el().style.display="flex"}break}this.player.off("timeupdate");this.player.off("durationchange");this.player.off("loadedmetadata");this.setDuration(this.maxLength);this.player.controlBar.playToggle.hide()}},{key:"isRecording",value:function e(){return this._recording}},{key:"isProcessing",value:function e(){return this._processing}},{key:"isDestroyed",value:function e(){return this.player&&this.player.children()===null}},{key:"getDevice",value:function e(){if(this.deviceReadyCallback===undefined){this.deviceReadyCallback=this.onDeviceReady.bind(this)}if(this.deviceErrorCallback===undefined){this.deviceErrorCallback=this.onDeviceError.bind(this)}if(this.engineStopCallback===undefined){this.engineStopCallback=this.onRecordComplete.bind(this)}switch(this.getRecordType()){case C.AUDIO_ONLY:this.mediaType={audio:this.audioRecorderType===B?true:this.audioRecorderType,video:false};this.surfer.surfer.microphone.un("deviceReady",this.deviceReadyCallback);this.surfer.surfer.microphone.un("deviceError",this.deviceErrorCallback);this.surfer.surfer.microphone.on("deviceReady",this.deviceReadyCallback);this.surfer.surfer.microphone.on("deviceError",this.deviceErrorCallback);this.surfer.setupPlaybackEvents(false);this.surfer.liveMode=true;this.surfer.surfer.microphone.paused=false;this.surfer.surfer.microphone.start();break;case C.IMAGE_ONLY:case C.VIDEO_ONLY:this.mediaType={audio:false,video:this.videoRecorderType===B?true:this.videoRecorderType};navigator.mediaDevices.getUserMedia({audio:false,video:this.getRecordType()===C.IMAGE_ONLY?this.recordImage:this.recordVideo}).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));break;case C.AUDIO_VIDEO:this.mediaType={audio:this.audioRecorderType===B?true:this.audioRecorderType,video:this.videoRecorderType===B?true:this.videoRecorderType};navigator.mediaDevices.getUserMedia({audio:this.recordAudio,video:this.recordVideo}).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));break;case C.ANIMATION:this.mediaType={audio:false,video:false,gif:true};navigator.mediaDevices.getUserMedia({audio:false,video:this.recordAnimation}).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));break}}},{key:"onDeviceReady",value:function e(t){var r=this;this._deviceActive=true;this.stream=t;this.player.deviceButton.hide();this.setDuration(this.maxLength);this.setCurrentTime(0);this.player.controlBar.playToggle.hide();this.off(this.player,"timeupdate",this.playbackTimeUpdate);this.off(this.player,"ended",this.playbackTimeUpdate);if(this.getRecordType()!==C.IMAGE_ONLY){if(this.getRecordType()!==C.AUDIO_ONLY&&(this.audioEngine===k.LIBVORBISJS||this.audioEngine===k.RECORDERJS||this.audioEngine===k.LAMEJS||this.audioEngine===k.OPUSRECORDER)){throw new Error("Currently "+this.audioEngine+" is only supported in audio-only mode.")}var i;switch(this.audioEngine){case k.RECORDRTC:i=D.default;break;case k.LIBVORBISJS:i=I.default.LibVorbisEngine;break;case k.RECORDERJS:i=I.default.RecorderjsEngine;break;case k.LAMEJS:i=I.default.LamejsEngine;break;case k.OPUSRECORDER:i=I.default.OpusRecorderEngine;break;default:throw new Error("Unknown audioEngine: "+this.audioEngine)}try{this.engine=new i(this.player,this.player.options_)}catch(e){console.error(e);throw new Error("Could not load "+this.audioEngine+" plugin")}this.engine.on("recordComplete",this.engineStopCallback);this.engine.bufferSize=this.audioBufferSize;this.engine.sampleRate=this.audioSampleRate;this.engine.bitRate=this.audioBitRate;this.engine.audioChannels=this.audioChannels;this.engine.audioWorkerURL=this.audioWorkerURL;this.engine.mimeType={video:this.videoMimeType,gif:"image/gif"};if(this.audioMimeType!==null&&this.audioMimeType!==B){this.engine.mimeType.audio=this.audioMimeType}this.engine.video={width:this.videoFrameWidth,height:this.videoFrameHeight};this.engine.canvas={width:this.videoFrameWidth,height:this.videoFrameHeight};this.engine.quality=this.animationQuality;this.engine.frameRate=this.animationFrameRate;if(this.recordTimeSlice&&this.recordTimeSlice>0){this.engine.timeSlice=this.recordTimeSlice;this.engine.onTimeStamp=this.onTimeStamp.bind(this)}this.engine.setup(this.stream,this.mediaType,this.debug);var o=[this.player.controlBar.currentTimeDisplay,this.player.controlBar.timeDivider,this.player.controlBar.durationDisplay];o.forEach(function(e){if(e!==undefined){e.el().style.display="block";e.show()}});this.player.recordToggle.show()}else{this.player.recordIndicator.disable();this.retrySnapshot();this.player.cameraButton.onStop();this.player.cameraButton.show()}if(this.getRecordType()!==C.AUDIO_ONLY){this.mediaElement=this.player.el().firstChild;this.mediaElement.controls=false;this.mediaElement.muted=true;this.displayVolumeControl(false);this.load(this.stream);this.player.one("loadedmetadata",function(){r.mediaElement.play();r.player.trigger("deviceReady")})}else{this.player.trigger("deviceReady")}}},{key:"onDeviceError",value:function e(t){this._deviceActive=false;this.player.deviceErrorCode=t;this.player.trigger("deviceError")}},{key:"start",value:function e(){var t=this;if(!this.isProcessing()){this._recording=true;this.player.controlBar.playToggle.hide();this.off(this.player,"timeupdate",this.playbackTimeUpdate);this.off(this.player,"ended",this.playbackTimeUpdate);switch(this.getRecordType()){case C.AUDIO_ONLY:this.surfer.setupPlaybackEvents(false);this.surfer.surfer.microphone.paused=false;this.surfer.liveMode=true;this.surfer.surfer.microphone.play();break;case C.VIDEO_ONLY:case C.AUDIO_VIDEO:this.startVideoPreview();break;case C.ANIMATION:this.player.recordCanvas.hide();this.player.animationDisplay.hide();this.mediaElement.style.display="block";this.captureFrame().then(function(e){t.startVideoPreview()});break}if(this.autoMuteDevice){this.muteTracks(false)}switch(this.getRecordType()){case C.IMAGE_ONLY:this.createSnapshot();this.player.trigger("startRecord");break;case C.VIDEO_ONLY:case C.AUDIO_VIDEO:case C.ANIMATION:this.player.one("loadedmetadata",function(){t.startRecording()});break;default:this.startRecording()}}}},{key:"startRecording",value:function e(){this.paused=false;this.pauseTime=this.pausedTime=0;this.startTime=(new Date).getTime();this.countDown=this.player.setInterval(this.onCountDown.bind(this),100);if(this.engine!==undefined){this.engine.dispose()}this.engine.start();this.player.trigger("startRecord")}},{key:"stop",value:function e(){if(!this.isProcessing()){this._recording=false;this._processing=true;if(this.getRecordType()!==C.IMAGE_ONLY){this.player.trigger("stopRecord");this.player.clearInterval(this.countDown);if(this.engine){this.engine.stop()}if(this.autoMuteDevice){this.muteTracks(true)}}else{if(this.player.recordedData){this.player.trigger("finishRecord")}}}}},{key:"stopDevice",value:function e(){if(this.isRecording()){this.player.one("finishRecord",this.stopStream.bind(this));this.stop()}else{this.stopStream()}}},{key:"stopStream",value:function e(){if(this.stream){this._deviceActive=false;if(this.getRecordType()===C.AUDIO_ONLY){this.surfer.surfer.microphone.stopDevice();return}this.stream.getTracks().forEach(function(e){e.stop()})}}},{key:"pause",value:function e(){if(!this.paused){this.pauseTime=(new Date).getTime();this.paused=true;this.engine.pause()}}},{key:"resume",value:function e(){if(this.paused){this.pausedTime+=(new Date).getTime()-this.pauseTime;this.engine.resume();this.paused=false}}},{key:"onRecordComplete",value:function e(){var t=this;this.player.recordedData=this.engine.recordedData;this.player.controlBar.playToggle.removeClass("vjs-ended");this.player.controlBar.playToggle.show();this.player.trigger("finishRecord");switch(this.getRecordType()){case C.AUDIO_ONLY:this.surfer.pause();this.surfer.setupPlaybackEvents(true);this.player.loadingSpinner.show();this.surfer.surfer.once("ready",function(){t._processing=false});this.load(this.player.recordedData);break;case C.VIDEO_ONLY:case C.AUDIO_VIDEO:this.player.one("pause",function(){t._processing=false;t.player.loadingSpinner.hide();t.setDuration(t.streamDuration);t.on(t.player,"timeupdate",t.playbackTimeUpdate);t.on(t.player,"ended",t.playbackTimeUpdate);if(t.getRecordType()===C.AUDIO_VIDEO){t.mediaElement.muted=false;t.displayVolumeControl(true)}if((0,R.isChrome)()&&t.getRecordType()===C.AUDIO_VIDEO){t.load(t.player.recordedData.video)}else{t.load(t.player.recordedData)}});this.player.pause();break;case C.ANIMATION:this._processing=false;this.player.loadingSpinner.hide();this.setDuration(this.streamDuration);this.mediaElement.style.display="none";this.player.recordCanvas.show();this.player.pause();this.on(this.player,"play",this.showAnimation);this.on(this.player,"pause",this.hideAnimation);break}}},{key:"onCountDown",value:function e(){if(!this.paused){var t=(new Date).getTime();var r=this.maxLength;var i=(t-(this.startTime+this.pausedTime))/1e3;this.streamDuration=i;if(i>=r){i=r;this.stop()}this.setDuration(r);this.setCurrentTime(i,r);this.player.trigger("progressRecord")}}},{key:"getCurrentTime",value:function e(){var t=isNaN(this.streamCurrentTime)?0:this.streamCurrentTime;if(this.getRecordType()===C.AUDIO_ONLY){t=this.surfer.getCurrentTime()}return t}},{key:"setCurrentTime",value:function e(t,r){t=isNaN(t)?0:t;r=isNaN(r)?0:r;switch(this.getRecordType()){case C.AUDIO_ONLY:this.surfer.setCurrentTime(t,r);break;case C.VIDEO_ONLY:case C.AUDIO_VIDEO:case C.ANIMATION:this.streamCurrentTime=Math.min(t,r);this.player.controlBar.currentTimeDisplay.formattedTime_=this.player.controlBar.currentTimeDisplay.contentEl().lastChild.textContent=(0,_.default)(this.streamCurrentTime,r,this.msDisplayMax);break}}},{key:"getDuration",value:function e(){var t=isNaN(this.streamDuration)?0:this.streamDuration;return t}},{key:"setDuration",value:function e(t){t=isNaN(t)?0:t;switch(this.getRecordType()){case C.AUDIO_ONLY:this.surfer.setDuration(t);break;case C.VIDEO_ONLY:case C.AUDIO_VIDEO:case C.ANIMATION:this.player.controlBar.durationDisplay.formattedTime_=this.player.controlBar.durationDisplay.contentEl().lastChild.textContent=(0,_.default)(t,t,this.msDisplayMax);break}}},{key:"load",value:function e(t){switch(this.getRecordType()){case C.AUDIO_ONLY:this.surfer.load(t);break;case C.IMAGE_ONLY:case C.VIDEO_ONLY:case C.AUDIO_VIDEO:case C.ANIMATION:if(t instanceof Blob||t instanceof File){(0,w.default)(t,this.mediaElement,false)}else{(0,w.default)(t,this.mediaElement,true)}break}}},{key:"saveAs",value:function e(t){if(this.engine&&t!==undefined){this.engine.saveAs(t)}}},{key:"dispose",value:function e(){this.player.off("ready");this.player.off("userinactive");this.player.off("loadedmetadata");if(this.engine){this.engine.dispose();this.engine.off("recordComplete",this.engineStopCallback)}this.stop();this.stopDevice();this.player.clearInterval(this.countDown);if(this.getRecordType()==C.AUDIO_ONLY){if(this.surfer){this.surfer.destroy()}}this.resetState();n(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"dispose",this).call(this)}},{key:"destroy",value:function e(){this.player.dispose()}},{key:"reset",value:function e(){var t=this;if(this.engine){this.engine.dispose();this.engine.off("recordComplete",this.engineStopCallback)}this.stop();this.stopDevice();this.player.clearInterval(this.countDown);this.loadOptions();this.resetState();this.setDuration(this.maxLength);this.setCurrentTime(0);this.player.reset();switch(this.getRecordType()){case C.AUDIO_ONLY:if(this.surfer&&this.surfer.surfer){this.surfer.surfer.empty()}break;case C.IMAGE_ONLY:case C.ANIMATION:this.player.recordCanvas.hide();this.player.cameraButton.hide();break}this.player.controlBar.playToggle.hide();this.player.deviceButton.show();this.player.recordToggle.hide();this.player.one("loadedmetadata",function(){t.setDuration(t.maxLength)})}},{key:"resetState",value:function e(){this._recording=false;this._processing=false;this._deviceActive=false;this.devices=[]}},{key:"muteTracks",value:function e(t){if((this.getRecordType()===C.AUDIO_ONLY||this.getRecordType()===C.AUDIO_VIDEO)&&this.stream.getAudioTracks().length>0){this.stream.getAudioTracks()[0].enabled=!t}if(this.getRecordType()!==C.AUDIO_ONLY&&this.stream.getVideoTracks().length>0){this.stream.getVideoTracks()[0].enabled=!t}}},{key:"getRecordType",value:function e(){return(0,C.getRecorderMode)(this.recordImage,this.recordAudio,this.recordVideo,this.recordAnimation)}},{key:"createSnapshot",value:function e(){var t=this;this.captureFrame().then(function(e){t.player.recordedData=e.toDataURL("image/png");t.mediaElement.style.display="none";t.player.recordCanvas.show();t.stop()})}},{key:"retrySnapshot",value:function e(){this._processing=false;this.player.recordCanvas.hide();this.player.el().firstChild.style.display="block"}},{key:"captureFrame",value:function e(){var o=this;var n=(0,R.detectBrowser)();var a=this.player.recordCanvas.el().firstChild;a.width=this.player.width();a.height=this.player.height();return new Promise(function(t,e){if(n.browser==="chrome"&&n.version>=60&&(typeof ImageCapture==="undefined"?"undefined":s(ImageCapture))===(typeof Function==="undefined"?"undefined":s(Function))){try{var r=o.stream.getVideoTracks()[0];var i=new ImageCapture(r);i.grabFrame().then(function(e){o.drawCanvas(a,e);t(a)}).catch(function(e){})}catch(e){}}o.drawCanvas(a,o.mediaElement);t(a)})}},{key:"drawCanvas",value:function e(t,r){t.getContext("2d").drawImage(r,0,0,t.width,t.height)}},{key:"startVideoPreview",value:function e(){this.off("timeupdate");this.off("durationchange");this.off("loadedmetadata");this.off("play");this.mediaElement.muted=true;this.displayVolumeControl(false);this.load(this.stream);this.mediaElement.play()}},{key:"showAnimation",value:function e(){var t=this.player.animationDisplay.el().firstChild;t.width=this.player.width();t.height=this.player.height();this.player.recordCanvas.hide();(0,w.default)(this.player.recordedData,t,false);this.player.animationDisplay.show()}},{key:"hideAnimation",value:function e(){this.player.recordCanvas.show();this.player.animationDisplay.hide()}},{key:"playbackTimeUpdate",value:function e(){this.setCurrentTime(this.player.currentTime(),this.streamDuration)}},{key:"onTimeStamp",value:function e(t,r){this.player.currentTimestamp=t;this.player.allTimestamps=r;var i;switch(this.getRecordType()){case C.AUDIO_ONLY:i=this.engine.engine.audioRecorder;break;case C.ANIMATION:i=this.engine.engine.gifRecorder;break;default:i=this.engine.engine.videoRecorder}i=i.getInternalRecorder();if(i instanceof MediaStreamRecorder===true){this.player.recordedData=i.getArrayOfBlobs();this.engine.addFileInfo(this.player.recordedData[this.player.recordedData.length-1])}this.player.trigger("timestamp")}},{key:"enumerateDevices",value:function e(){var t=this;if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices){this.player.enumerateErrorCode="enumerateDevices() not supported.";this.player.trigger("enumerateError");return}navigator.mediaDevices.enumerateDevices(this).then(function(e){t.devices=[];e.forEach(function(e){t.devices.push(e)});t.player.trigger("enumerateReady")}).catch(function(e){t.player.enumerateErrorCode=e;t.player.trigger("enumerateError")})}},{key:"setAudioOutput",value:function e(t){var r=this;var i=void 0;switch(this.getRecordType()){case C.AUDIO_ONLY:this.surfer.surfer.setSinkId(t).then(function(e){r.player.trigger("audioOutputReady");return}).catch(function(e){i=e});break;default:var o=player.tech_.el_;if(t){if(typeof o.sinkId!=="undefined"){o.setSinkId(t).then(function(e){r.player.trigger("audioOutputReady");return}).catch(function(e){i=e})}else{i="Browser does not support audio output device selection."}}else{i="Invalid deviceId: "+t}break}this.player.trigger("error",i)}},{key:"displayVolumeControl",value:function e(t){if(this.player.controlBar.volumePanel!==undefined){if(t===true){t="flex"}else{t="none"}this.player.controlBar.volumePanel.el().style.display=t}}}]);return o}(M);U.VERSION="2.4.1";I.default.Record=U;if(I.default.getPlugin("record")===undefined){I.default.registerPlugin("record",U)}e.exports={Record:U}},0:function(e,t,r){r("./src/js/videojs.record.js");e.exports=r("./src/css/videojs.record.scss")},"video.js":function(e,t){e.exports=r}})});
(function(i,a){typeof window.layui&&layui.define?layui.define("videojs",function(e){var t=layui.videojs;e("videojsplaylistui",a(i.document,t))}):typeof exports==="object"&&typeof module!=="undefined"?module.exports=a(require("global/document"),require("video.js")):typeof define==="function"&&define.amd?define(["global/document","video.js"],a):i.videojsPlaylistUi=a(i.document,i.videojs)})(this,function(v,h){"use strict";layui.link(layui.cache.base+"lib/extend/video/plus/css/videojs-playlist-ui.css");v=v&&v.hasOwnProperty("default")?v["default"]:v;h=h&&h.hasOwnProperty("default")?h["default"]:h;function i(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var e="3.5.2";var o=h.dom||h;var t=h.registerPlugin||h.plugin;var a=function e(t,i){for(var a=0,l=t.length;a<l;a++){if(t[a]===i){return a}}return-1};var l=function(){var e=v.createElement("x");e.style.cssText="pointer-events:auto";return e.style.pointerEvents==="auto"}();var n={className:"vjs-playlist",playOnSelect:false,supportsCssPointerEvents:l};var p=function e(t){t.addClass("vjs-selected")};var r=function e(t){t.removeClass("vjs-selected");if(t.thumbnail){o.removeClass(t.thumbnail,"vjs-playlist-now-playing")}};var d=function e(t){t.addClass("vjs-up-next")};var u=function e(t){t.removeClass("vjs-up-next")};var y=function e(t){if(!t){var i=v.createElement("div");i.className="vjs-playlist-thumbnail vjs-playlist-thumbnail-placeholder";return i}var a=v.createElement("picture");a.className="vjs-playlist-thumbnail";if(typeof t==="string"){var l=v.createElement("img");l.src=t;l.alt="";a.appendChild(l)}else{for(var s=0;s<t.length-1;s++){var n=t[s];var r=v.createElement("source");for(var o in n){r[o]=n[o]}a.appendChild(r)}var p=t[t.length-1];var d=v.createElement("img");d.alt="";for(var u in p){d[u]=p[u]}a.appendChild(d)}return a};var s=h.getComponent("Component");var c=function(l){i(e,l);function e(e,t,i){var a;if(!t.item){throw new Error("Cannot construct a PlaylistMenuItem without an item option")}a=l.call(this,e,t)||this;a.item=t.item;a.playOnSelect=i.playOnSelect;a.emitTapEvents();a.on(["click","tap"],a.switchPlaylistItem_);a.on("keydown",a.handleKeyDown_);return a}var t=e.prototype;t.handleKeyDown_=function e(t){if(t.which===13||t.which===32){this.switchPlaylistItem_()}};t.switchPlaylistItem_=function e(t){this.player_.playlist.currentItem(a(this.player_.playlist(),this.item));if(this.playOnSelect){this.player_.play()}};t.createEl=function e(){var i=v.createElement("li");var a=this.options_.item;if(typeof a.data==="object"){var t=Object.keys(a.data);t.forEach(function(e){var t=a.data[e];i.dataset[e]=t})}i.className="vjs-playlist-item";i.setAttribute("tabIndex",0);this.thumbnail=y(a.thumbnail);i.appendChild(this.thumbnail);if(a.duration){var l=v.createElement("time");var s=h.formatTime(a.duration);l.className="vjs-playlist-duration";l.setAttribute("datetime","PT0H0M"+a.duration+"S");l.appendChild(v.createTextNode(s));i.appendChild(l)}var n=v.createElement("span");var r=this.localize("Now Playing");n.className="vjs-playlist-now-playing-text";n.appendChild(v.createTextNode(r));n.setAttribute("title",r);this.thumbnail.appendChild(n);var o=v.createElement("div");o.className="vjs-playlist-title-container";this.thumbnail.appendChild(o);var p=v.createElement("span");var d=this.localize("Up Next");p.className="vjs-up-next-text";p.appendChild(v.createTextNode(d));p.setAttribute("title",d);o.appendChild(p);var u=v.createElement("cite");var c=a.name||this.localize("Untitled Video");u.className="vjs-playlist-name";u.appendChild(v.createTextNode(c));u.setAttribute("title",c);o.appendChild(u);return i};return e}(s);var m=function(a){i(e,a);function e(e,t){var i;if(!e.playlist){throw new Error("videojs-playlist is required for the playlist component")}i=a.call(this,e,t)||this;i.items=[];if(t.horizontal){i.addClass("vjs-playlist-horizontal")}else{i.addClass("vjs-playlist-vertical")}if(t.supportsCssPointerEvents){i.addClass("vjs-csspointerevents")}i.createPlaylist_();if(!h.browser.TOUCH_ENABLED){i.addClass("vjs-mouse")}i.on(e,["loadstart","playlistchange","playlistsorted"],function(e){i.update()});i.on(e,"adstart",function(){i.addClass("vjs-ad-playing")});i.on(e,"adend",function(){i.removeClass("vjs-ad-playing")});i.on("dispose",function(){i.empty_();e.playlistMenu=null});i.on(e,"dispose",function(){i.dispose()});return i}var t=e.prototype;t.createEl=function e(){return o.createEl("div",{className:this.options_.className})};t.empty_=function e(){if(this.items&&this.items.length){this.items.forEach(function(e){return e.dispose()});this.items.length=0}};t.createPlaylist_=function e(){var t=this.player_.playlist()||[];var i=this.el_.querySelector(".vjs-playlist-item-list");var a=this.el_.querySelector(".vjs-playlist-ad-overlay");if(!i){i=v.createElement("ol");i.className="vjs-playlist-item-list";this.el_.appendChild(i)}this.empty_();for(var l=0;l<t.length;l++){var s=new c(this.player_,{item:t[l]},this.options_);this.items.push(s);i.appendChild(s.el_)}if(!a){a=v.createElement("li");a.className="vjs-playlist-ad-overlay";i.appendChild(a)}else{i.appendChild(a)}var n=this.player_.playlist.currentItem();if(this.items.length&&n>=0){p(this.items[n]);var r=this.items[n].$(".vjs-playlist-thumbnail");if(r){o.addClass(r,"vjs-playlist-now-playing")}}};t.update=function e(){var t=this.player_.playlist();if(this.items.length!==t.length){this.createPlaylist_();return}for(var i=0;i<this.items.length;i++){if(this.items[i].item!==t[i]){this.createPlaylist_();return}}var a=this.player_.playlist.currentItem();for(var l=0;l<this.items.length;l++){var s=this.items[l];if(l===a){p(s);if(v.activeElement!==s.el()){o.addClass(s.thumbnail,"vjs-playlist-now-playing")}u(s)}else if(l===a+1){r(s);d(s)}else{r(s);u(s)}}};return e}(s);var f=function e(t){for(var i=0;i<t.childNodes.length;i++){if(o.isEl(t.childNodes[i])){return true}}return false};var j=function e(t){var i=v.querySelectorAll("."+t);var a;for(var l=0;l<i.length;l++){if(!f(i[l])){a=i[l];break}}return a};var C=function e(t){var i=this;if(!i.playlist){throw new Error("videojs-playlist plugin is required by the videojs-playlist-ui plugin")}if(o.isEl(t)){h.log.warn('videojs-playlist-ui: Passing an element directly to playlistUi() is deprecated, use the "el" option instead!');t={el:t}}t=h.mergeOptions(n,t);if(i.playlistMenu){var a=i.playlistMenu.el();if(a){var l=a.parentNode;var s=a.nextSibling;i.playlistMenu.dispose();o.emptyEl(a);if(s){l.insertBefore(a,s)}else{l.appendChild(a)}t.el=a}}if(!o.isEl(t.el)){t.el=j(t.className)}i.playlistMenu=new m(i,t)};h.registerComponent("PlaylistMenu",m);h.registerComponent("PlaylistMenuItem",c);t("playlistUi",C);C.VERSION=e;return C});
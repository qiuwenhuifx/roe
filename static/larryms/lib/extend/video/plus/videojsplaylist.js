(function(e,t){typeof window.layui&&layui.define?layui.define("videojs",function(e){var r=layui.videojs;e("videojsplaylist",t(r))}):typeof exports==="object"&&typeof module!=="undefined"?module.exports=t(require("video.js")):typeof define==="function"&&define.amd?define(["video.js"],t):e.videojsPlaylist=t(e.videojs)})(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t["default"]:t;var e=function e(r){return typeof r==="number"&&!isNaN(r)&&r>=0&&r<Infinity};var i=function e(r){var t=r.playlist.autoadvance_;if(t.timeout){r.clearTimeout(t.timeout)}if(t.trigger){r.off("ended",t.trigger)}t.timeout=null;t.trigger=null};var a=function r(t,n){i(t);if(!e(n)){t.playlist.autoadvance_.delay=null;return}t.playlist.autoadvance_.delay=n;t.playlist.autoadvance_.trigger=function(){var e=function e(){return r(t,n)};t.one("play",e);t.playlist.autoadvance_.timeout=t.setTimeout(function(){i(t);t.off("play",e);t.playlist.next()},n*1e3)};t.one("ended",t.playlist.autoadvance_.trigger)};var u=function e(r){var t=r.remoteTextTracks();var n=t&&t.length||0;while(n--){r.removeRemoteTextTrack(t[n])}};var n=function e(r,t){var n=!r.paused()||r.ended();r.trigger("beforeplaylistitem",t);r.poster(t.poster||"");r.src(t.sources);u(r);r.ready(function(){(t.textTracks||[]).forEach(r.addRemoteTextTrack.bind(r));r.trigger("playlistitem",t);if(n){var e=r.play();if(typeof e!=="undefined"&&typeof e.then==="function"){e.then(null,function(e){})}}a(r,r.playlist.autoadvance_.delay)});return r};var o=function e(r,t){var n=r;var i=t;if(typeof r==="object"){n=r.src}if(typeof t==="object"){i=t.src}if(/^\/\//.test(n)){i=i.slice(i.indexOf("//"))}if(/^\/\//.test(i)){n=n.slice(n.indexOf("//"))}return n===i};var c=function e(r,t){for(var n=0;n<r.length;n++){var i=r[n].sources;if(Array.isArray(i)){for(var a=0;a<i.length;a++){var u=i[a];if(u&&o(u,t)){return n}}}}return-1};var s=function e(r){var t=-1;var n=r.length-1;while(++t<r.length){var i=t+Math.floor(Math.random()*(n-t+1));var a=r[i];r[i]=r[t];r[t]=a}return r};function f(u,e,r){if(r===void 0){r=0}var o=null;var f=false;var l=u.playlist=function(e,r){if(r===void 0){r=0}if(f){throw new Error("do not call playlist() during a playlist change")}if(Array.isArray(e)){var t=Array.isArray(o)?o.slice():null;o=e.slice();f=true;u.trigger({type:"duringplaylistchange",nextIndex:r,nextPlaylist:o,previousIndex:l.currentIndex_,previousPlaylist:t||[]});f=false;if(r!==-1){l.currentItem(r)}if(t){u.setTimeout(function(){u.trigger("playlistchange")},0)}}return o.slice()};u.on("loadstart",function(){if(l.currentItem()===-1){i(u)}});l.currentIndex_=-1;l.player_=u;l.autoadvance_={};l.repeat_=false;l.currentItem=function(e){if(f){return l.currentIndex_}if(typeof e==="number"&&l.currentIndex_!==e&&e>=0&&e<o.length){l.currentIndex_=e;n(l.player_,o[l.currentIndex_])}else{l.currentIndex_=l.indexOf(l.player_.currentSrc()||"")}return l.currentIndex_};l.contains=function(e){return l.indexOf(e)!==-1};l.indexOf=function(e){if(typeof e==="string"){return c(o,e)}var r=Array.isArray(e)?e:e.sources;for(var t=0;t<r.length;t++){var n=r[t];if(typeof n==="string"){return c(o,n)}else if(n.src){return c(o,n.src)}}return-1};l.currentIndex=function(){return l.currentItem()};l.lastIndex=function(){return o.length-1};l.nextIndex=function(){var e=l.currentItem();if(e===-1){return-1}var r=l.lastIndex();if(l.repeat_&&e===r){return 0}return Math.min(e+1,r)};l.previousIndex=function(){var e=l.currentItem();if(e===-1){return-1}if(l.repeat_&&e===0){return l.lastIndex()}return Math.max(e-1,0)};l.first=function(){if(f){return}if(o.length){return o[l.currentItem(0)]}l.currentIndex_=-1};l.last=function(){if(f){return}if(o.length){return o[l.currentItem(l.lastIndex())]}l.currentIndex_=-1};l.next=function(){if(f){return}var e=l.nextIndex();if(e!==l.currentIndex_){return o[l.currentItem(e)]}};l.previous=function(){if(f){return}var e=l.previousIndex();if(e!==l.currentIndex_){return o[l.currentItem(e)]}};l.autoadvance=function(e){a(l.player_,e)};l.repeat=function(e){if(e===undefined){return l.repeat_}if(typeof e!=="boolean"){t.log.error("videojs-playlist: Invalid value for repeat",e);return}l.repeat_=!!e;return l.repeat_};l.sort=function(e){if(!o.length){return}o.sort(e);if(f){return}u.trigger("playlistsorted")};l.reverse=function(){if(!o.length){return}o.reverse();if(f){return}u.trigger("playlistsorted")};l.shuffle=function(e){var r=e===void 0?{}:e,t=r.rest;var n=0;var i=o;if(t){n=l.currentIndex_+1;i=o.slice(n)}if(i.length<=1){return}s(i);if(t){var a;(a=o).splice.apply(a,[n,i.length].concat(i))}if(f){return}u.trigger("playlistsorted")};if(Array.isArray(e)){l(e.slice(),r)}else{o=[]}return l}var r="4.2.6";var l=t.registerPlugin||t.plugin;var d=function e(r,t){f(this,r,t)};l("playlist",d);d.VERSION=r;return d});
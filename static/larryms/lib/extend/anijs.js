(function(t,n){"use strict";if(window.layui&&layui.define){layui.define(function(e){e("anijs",n(t))})}else if(typeof module=="object"&&typeof module.exports=="object"){module.exports=t.document?n(t,true):function(e){if(!e.document){throw new Error("AniJS-RWWD")}return n(e)}}else{n(t)}})(typeof window!=="undefined"?window:this,function(h,e){if(!h.larrymsExtend){return false}layui.link(layui.cache.extendStyle+"animatelib/anijs.css");var t=function(u){var o="data-anijs",n="default",e="body",l="|",f="$",s="if",v="on",c=["do","after","before","to"],t="to",i="(\\s+|^)",a="(\\s+|$)",r="animationend",p="transitionend",d="target";u={rootDOMTravelScope:{},notifierCollection:{},init:function(){m._helperCollection={};var e=m._createDefaultHelper();u.registerHelper(n,e);m._helperDefaultIndex=n;u.rootDOMTravelScope=document;u.Parser=m.Parser;m._animationEndEvent=m._animationEndPrefix();m._classNamesWhenAnim=""},setDOMRootTravelScope:function(e){var t,n=document;try{if(e==="document"){t=n}else{t=n.querySelector(e);if(!t){t=n}}}catch(e){t=n}u.rootDOMTravelScope=t},run:function(){var e=[],t={};u.purgeAll();u.notifierCollection={};e=m._findAniJSNodeCollection(u.rootDOMTravelScope);var n=e.length,r=0,i;for(r;r<n;r++){i=e[r];t=m._getParsedAniJSSentenceCollection(i.getAttribute(o));m._setupElementAnim(i,t)}var a=u.getNotifier("AniJSNotifier");if(a){a.dispatchEvent("onRunFinished")}},createAnimation:function(e,t){var n=t||"";m._setupElementAnim(n,e)},getHelper:function(e){var t=m._helperCollection;return t[e]||t[n]},registerHelper:function(e,t){m._helperCollection[e]=t},purge:function(e){if(e&&e!==""&&e!==" "){var t=document.querySelectorAll(e),n=t.length,r=0;for(r;r<n;r++){u.EventSystem.purgeEventTarget(t[r])}}},purgeAll:function(){u.EventSystem.purgeAll()},purgeEventTarget:function(e){u.EventSystem.purgeEventTarget(e)},setClassNamesWhenAnim:function(e){m._classNamesWhenAnim=" "+e},createNotifier:function(){return u.EventSystem.createEventTarget()},registerNotifier:function(e){var t=u.notifierCollection;if(e.id&&e.value&&u.EventSystem.isEventTarget(e.value)){t[e.id]=e.value;return 1}return""},getNotifier:function(e){return u.notifierCollection[e]}};var m={};m._createDefaultHelper=function(){var e={removeAnim:function(e,t){if(e.target&&e.type){t.nodeHelper.removeClass(e.target,t.behavior)}},holdAnimClass:function(e,t){},fireOnce:function(e,t){t.eventSystem.removeEventListenerHelper(t.eventTarget,t.event.type,t.listener)},emit:function(e,t,n){var r=n[0]||null,i="";if(r!==null){r=r.split(".");if(r.length>1){i=r[0];r=r[1]}else{i="";r=r[0]}var a=u.getNotifier(i)||null;if(a!==null)a.dispatchEvent(r)}if(!t.hasRunned){t.run()}}};return e};m._createParser=function(){return new Parser};m._setupElementAnim=function(e,t){var n=t.length,r=0,i,a,o,l;for(r;r<n;r++){i=t[r];o=i.after;a=i.before;l=i.behavior;if(o){i.after=m.Parser.parseDoDefinition(o)}if(a){i.before=m.Parser.parseDoDefinition(a)}if(l){i.behavior=m.Parser.parseDoDefinition(l)}m._setupElementSentenceAnim(e,i)}};m._setupElementSentenceAnim=function(l,f){var e=m._eventHelper(f),t=m._eventTargetHelper(l,f),s;if(f.after&&m.Util.beArray(f.after)){s=f.after[0]}if(e!==""){var n=t.length,r=0,i;for(r;r<n;r++){i=t[r];if(u.EventSystem.isEventTarget(i)){var v=function(e){var t=m._behaviorTargetHelper(l,f,e),n=m._behaviorHelper(f),r=m._beforeHelper(l,f),i=m._afterHelper(l,f);if(m._classNamesWhenAnim!==""){if(!m.Util.beArray(n))n+=m._classNamesWhenAnim}var a={behaviorTargetList:t,nodeHelper:m.NodeHelper,animationEndEvent:m._animationEndEvent,behavior:n,after:i,eventSystem:u.EventSystem,eventTarget:e.currentTarget,afterFunctionName:s,dataAniJSOwner:l,listener:v,event:e,before:r},o=new u.AnimationContext(a);o.runAll(a)};u.EventSystem.addEventListenerHelper(i,e,v,false);u.EventSystem.registerEventHandle(i,e,v)}}}};m._eventHelper=function(e){var t="",n=e.event||t;if(n===r){n=m._animationEndPrefix()}else if(n===p){n=m._transitionEndPrefix()}return n};m._eventTargetHelper=function(e,t){var n=e,r=[n],i=u.rootDOMTravelScope,a;if(t.eventTarget){a=m._notifierHelper(t.eventTarget);if(a.length>0){r=a}else if(t.eventTarget==="document"){r=[document]}else if(t.eventTarget==="window"){r=[h]}else if(t.eventTarget.split){try{r=i.querySelectorAll(t.eventTarget)}catch(e){console.log("Ugly Selector Here");r=[]}}}return r};m._behaviorTargetHelper=function(e,t,n){var r=e,i=[r],a=u.rootDOMTravelScope,o=t.behaviorTarget;if(o){if(!m.Util.beArray(o)){if(o===d&&n.currentTarget){i=[n.currentTarget]}else{o=o.split(f).join(",");try{i=a.querySelectorAll(o)}catch(e){i=[]}}}else{var l=this._actionHelper(e,t,o);if(l&&m.Util.isFunction(l[0])){i=l[0](n,{dataAniJSOwner:e},m._paramsHelper(l))}}}return i};m._behaviorHelper=function(e){return this._actionHelper({},e,e.behavior)};m._afterHelper=function(e,t){var n=t.after;if(!m.Util.beArray(n))return m._callbackHelper(e,t,n);return this._actionHelper(e,t,n)};m._beforeHelper=function(e,t){var n=t.before;if(!m.Util.beArray(n))return m._callbackHelper(e,t,n);return this._actionHelper(e,t,n)};m._actionHelper=function(e,t,n){var r=n||"",i;if(m.Util.beArray(r)){i=m._callbackHelper(e,t,r[0]);if(i){r[0]=i}else{r=r.join(" ")}}return r};m._callbackHelper=function(e,t,n){var r=n||"",i=m._helperHelper(t);if(r){if(!m.Util.isFunction(r)){var a=m._helperCollection,o=a[i];if(o&&m.Util.isFunction(o[r])){r=o[r]}else{r=false}}}return r};m._helperHelper=function(e){var t=e.helper||m._helperDefaultIndex;return t};m._notifierHelper=function(e){var t=[],n=u.notifierCollection;if(e){if(e.id&&u.EventSystem.isEventTarget(e.value)){t.push(e.value);u.registerNotifier(e)}else if(e.split){notifierIDList=e.split("$");var r=notifierIDList.length,i=1,a;for(i;i<r;i++){a=notifierIDList[i];if(a&&a!==" "){a=a.trim();var o=u.getNotifier(a);if(!o){o=u.EventSystem.createEventTarget();u.registerNotifier({id:a,value:o})}t.push(o)}}}}return t};m._paramsHelper=function(e){var t=[],n=e.length;while(n-- >1)t[n-1]=e[n];return t};m._getParsedAniJSSentenceCollection=function(e){return m.Parser.parse(e)};m._findAniJSNodeCollection=function(e){var t="["+o+"]";return e.querySelectorAll(t)};m._animationEndPrefix=function(){var e=m._endPrefixBrowserDetectionIndex(),t=[r,"oAnimationEnd",r,"webkitAnimationEnd"];return t[e]};m._transitionEndPrefix=function(){var e=m._endPrefixBrowserDetectionIndex(),t=[p,"oTransitionEnd",p,"webkitTransitionEnd"];return t[e]};m._endPrefixBrowserDetectionIndex=function(){var e=document.createElement("fe"),t="Animation",n=["animation","O"+t,"Moz"+t,"webkit"+t];for(var r=0;r<n.length;r++){if(e.style[n[r]]!==undefined){return r}}};u.AnimationContext=function(e){var s=this;s.init=function(e){s.behaviorTargetList=e.behaviorTargetList||[];s.nodeHelper=e.nodeHelper;s.animationEndEvent=e.animationEndEvent;s.behavior=e.behavior;s.after=e.after;s.eventSystem=e.eventSystem;s.eventTarget=e.eventTarget;s.afterFunctionName=e.afterFunctionName;s.dataAniJSOwner=e.dataAniJSOwner;s.listener=e.listener;s.event=e.event;s.before=e.before};s.doDefaultAction=function(e,t){var n=s,r=n.nodeHelper,i=n.animationEndEvent,a=n.after,o=n.afterFunctionName,l;n.eventSystem.addEventListenerHelper(e,i,function(e){e.stopPropagation();n.eventSystem.removeEventListenerHelper(e.target,e.type,arguments.callee);if(a){if(m.Util.isFunction(a)){a(e,s)}else if(m.Util.beArray(a)){a[0](e,s,m._paramsHelper(a))}}});if(o!=="holdAnimClass"&&o!=="$holdAnimClass"){l=e._ajLastBehavior;if(l){r.removeClass(e,l)}e._ajLastBehavior=t}e.offsetWidth=e.offsetWidth;r.addClass(e,t)};s.doFunctionAction=function(e,t){var n=s,r=n.after,i={target:e};t[0](i,s,m._paramsHelper(t));if(m.Util.isFunction(r)){r(i,s)}else{if(m.Util.beArray(r)){r[0](i,s,m._paramsHelper(r))}}};s.runAll=function(){var e=s,t=e.behaviorTargetList,n=t.length,r=e.behavior,i=0,a=e.before,o,l=s.event,f;for(i;i<n;i++){f={behaviorTargetList:[t[i]],nodeHelper:s.nodeHelper,animationEndEvent:s.animationEndEvent,behavior:s.behavior,after:s.after,eventSystem:s.eventSystem,eventTarget:s.eventTarget,afterFunctionName:s.afterFunctionName,dataAniJSOwner:s.dataAniJSOwner,listener:s.listener,event:l};o=new u.AnimationContext(f);if(a){if(m.Util.isFunction(a)){a(l,o)}else if(m.Util.beArray(a)){a[0](l,o,m._paramsHelper(a))}}else{o.run()}}};s.run=function(){var e=s,t=e.behavior,n=e.behaviorTargetList[0];s.hasRunned=1;if(m.Util.beArray(t)){e.doFunctionAction(n,t)}else{e.doDefaultAction(n,t)}};s.init(e)};m.Parser={parse:function(e){return this.parseDeclaration(e)},parseDeclaration:function(e){var t=[],n,r;n=e.split(";");var i=n.length,a=0;for(a;a<i;a++){r=this.parseSentence(n[a]);t.push(r)}return t},parseSentence:function(e){var t={},n,r;n=e.split(",");var i=n.length,a=0;for(a;a<i;a++){r=this.parseDefinition(n[a]);t[r.key]=r.value}return t},parseDefinition:function(e){var t={},n,r,i,a="event",o="eventTarget",l=["behavior","after","before","behaviorTarget"];n=e.split(":");if(n.length>1){r=n[0].trim();if(n.length>2){i=n.slice(1);i=i.join(":");i=i.trim()}else{i=n[1].trim()}t.value=i;if(r===s){r=a}else if(r===v){r=o}else{for(var f=c.length-1;f>=0;f--){if(r===c[f]){r=l[f];if((r==="after"||r==="before")&&i[0]!=="$"){i="$"+i}i=this.parseDoDefinition(i)}}}t.key=r;t.value=i}return t},parseDoDefinition:function(e){var t=/^\$(\w+)\s*/g,n=t.exec(e),r="",i=[],a=1;if(n!==null){r=n[1];doDefinitionArray=e.split(n[0])[1];doDefinitionArray=doDefinitionArray!==null?doDefinitionArray.split(l):[];e=[];e[0]=r;for(var o=0;o<doDefinitionArray.length;o++){if(doDefinitionArray[o]!=="")e[a++]=doDefinitionArray[o].trim()}return e}return e}};m.NodeHelper={addClass:function(e,t){if(!(t instanceof Array)){t=t.split(" ")}for(var n=0,r=t.length;n<r;++n){if(t[n]&&!new RegExp(i+t[n]+a).test(e.className)){e.className=e.className===""?t[n]:e.className.trim()+" "+t[n]}}},removeClass:function(e,t){if(!(t instanceof Array)){t=t.split(" ")}for(var n=0,r=t.length;n<r;++n){e.className=e.className.replace(new RegExp(i+t[n]+a)," ").trim()}},hasClass:function(e,t){return t&&new RegExp(i+t+a).test(e.className)}};m.Util={isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},beArray:function(e){return Array.isArray(e)}};u.EventSystem={eventCollection:{},eventIdCounter:0,isEventTarget:function(e){return e.addEventListener?1:0},createEventTarget:function(){return new u.EventTarget},addEventListenerHelper:function(e,t,n,r){e.addEventListener(t,n,false)},removeEventListenerHelper:function(e,t,n){if(e){e.removeEventListener(t,n)}},purgeAll:function(){var e=this,t=e.eventCollection,n=Object.keys(t),r=n.length,i=0,a,o;for(i;i<r;i++){a=n[i];o=t[a];if(o&&o.handleCollection&&o.handleCollection.length>0){e.purgeEventTarget(o.handleCollection[0].element)}delete t[a]}},purgeAllNodes:function(e){var t=e.querySelectorAll("*");size=t.length;for(var n=size-1;n>=0;n--){this.purgeEventTarget(t[n])}},purgeEventTarget:function(e){var t=this,n=e._aniJSEventID,r;if(n){r=t.eventCollection[n].handleCollection;var i=r.length,a=0,o;for(a;a<i;a++){o=r[a];t.removeEventListenerHelper(e,o.eventType,o.listener)}t.eventCollection[n]=e._aniJSEventID=null;delete t.eventCollection[n];delete e._aniJSEventID}},registerEventHandle:function(e,t,n){var r=this,i=e._aniJSEventID,a=r.eventCollection,o={eventType:t,listener:n,element:e};if(i){a[i].handleCollection.push(o)}else{var l={handleCollection:[o]};a[++r.eventIdCounter]=l;e._aniJSEventID=r.eventIdCounter}}};u.EventTarget=function e(){this._listeners={}};u.EventTarget.prototype={constructor:u.EventTarget,addEventListener:function(e,t,n){var r=this;if(typeof r._listeners[e]=="undefined"){r._listeners[e]=[]}r._listeners[e].push(t)},dispatchEvent:function(e){var t=this;if(typeof e=="string"){e={type:e}}if(!e.target){e.target=t}if(!e.type){throw new Error("Event object missing 'type' property.")}if(this._listeners[e.type]instanceof Array){var n=t._listeners[e.type];for(var r=0,i=n.length;r<i;r++){n[r].call(t,e)}}},removeEventListener:function(e,t){var n=this;if(n._listeners[e]instanceof Array){var r=n._listeners[e];for(var i=0,a=r.length;i<a;i++){if(r[i]===t){r.splice(i,1);break}}}}};return u}(t||{});t.init();t.run();if(typeof define==="function"&&define.amd){define("anijs",[],function(){return t})}if(typeof e==typeof undefined){h.AniJS=t}return t});
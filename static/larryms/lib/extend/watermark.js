(function e(t,n){if(window.layui&&layui.define){layui.define(function(e){e("watermark",n())})}else if(typeof exports==="object"&&typeof module==="object")module.exports=n();else if(typeof define==="function"&&define.amd)define([],n);else if(typeof exports==="object")exports["watermark"]=n();else t["watermark"]=n()})(this,function(){return function(n){var r={};function u(e){if(r[e])return r[e].exports;var t=r[e]={exports:{},id:e,loaded:false};n[e].call(t.exports,t,t.exports,u);t.loaded=true;return t.exports}u.m=n;u.c=r;u.p="";return u(0)}([function(e,t,n){n(1);e.exports=n(2).default},function(e,t){"use strict";t.__esModule=true;t["default"]=function(){};e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=g;var i=n(3);var o=n(5);var a=n(6);var r=n(7);var f=s(r);var u=n(10);var c=n(11);var l=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))t[n]=e[n]}}t.default=e;return t}}var v={init:function e(){}};function h(e){return(0,u.extend)((0,u.clone)(v),e)}function p(e,t){var n=e.canvas;var r=e.sources;var u=(0,o.dataUrl)(n);r.forEach(t.release);return u}function g(r){var e=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var u=arguments.length<=2||arguments[2]===undefined?null:arguments[2];var o=h(e);u||(u=(0,i.load)(r,o.init));return{dataUrl:function e(t){var n=this.then(function(e){return(0,i.mapToCanvas)(e,l.default)}).then(function(e){return f.result(t,e)}).then(function(e){return p(e,l.default)});return g(r,o,n)},load:function e(t,n){var r=this.then(function(e){return(0,i.load)([e].concat(t),n)});return g(t,o,r)},render:function e(){var t=this.then(function(e){return(0,i.load)([e])});return g(r,o,t)},blob:function e(t){var n=this.dataUrl(t).then(a.blob);return g(r,o,n)},image:function e(t){var n=this.dataUrl(t).then(i.createImage);return g(r,o,n)},then:function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++){n[r]=arguments[r]}return u.then.apply(u,n)}}}g.image=f.image;g.text=f.text;g.destroy=function(){return l.default.clear()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getLoader=a;t.load=i;t.loadUrl=f;t.loadFile=c;t.createImage=l;t.imageToCanvas=s;t.mapToCanvas=v;var r=n(4);function u(e){return e&&typeof Symbol!=="undefined"&&e.constructor===Symbol?"symbol":typeof e}function o(e,t,n){e.onload=function(){return n(e)};e.src=t}function a(e){var t=typeof e==="undefined"?"undefined":u(e);if(t==="string"){return f}if(e instanceof Image){return r.identity}return c}function i(e,t){var n=[];for(var r=0;r<e.length;r++){var u=e[r];var o=a(u);var i=o(u,t);n.push(i)}return Promise.all(n)}function f(t,e){var n=new Image;typeof e==="function"&&e(n);return new Promise(function(e){n.onload=function(){return e(n)};n.src=t})}function c(n){var r=new FileReader;return new Promise(function(e){var t=new Image;r.onloadend=function(){return o(t,r.result,e)};r.readAsDataURL(n)})}function l(e,t){var n=new Image;if(typeof t==="function"){n.onload=t}n.src=e;return n}function d(e,t){var n=t.getContext("2d");t.width=e.width;t.height=e.height;n.drawImage(e,0,0);return t}function s(e,t){var n=t.pop();return d(e,n)}function v(e,t){return e.map(function(e){return s(e,t)})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.sequence=n;t.identity=r;function n(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++){t[n]=arguments[n]}return function(e){return t.reduce(function(e,t){return t.call(null,e)},e)}}function r(e){return e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.dataUrl=n;function n(e){return e.toDataURL()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.blob=undefined;t.split=o;t.decode=i;t.uint8=a;var r=n(4);var u=/^data:([^;]+);base64,(.*)$/;function o(e){return u.exec(e).slice(1)}function i(e){return window.atob(e)}function a(e){var t=e.length;var n=new Uint8Array(t);for(var r=0;r<t;r++){n[r]=e.charCodeAt(r)}return n}var f=t.blob=(0,r.sequence)(o,function(e){return[i(e[1]),e[0]]},function(e){return new Blob([a(e[0])],{type:e[1]})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.text=t.image=undefined;t.result=l;var r=n(8);var u=a(r);var o=n(9);var i=a(o);function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n))t[n]=e[n]}}t.default=e;return t}}var f=t.image=u;var c=t.text=i;function l(e,t){var n=e.apply(null,t);return{canvas:n,sources:t}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.atPos=n;t.lowerRight=r;t.upperRight=u;t.lowerLeft=o;t.upperLeft=i;t.center=a;function n(r,u,o){o||(o=1);return function(e,t){var n=e.getContext("2d");n.save();n.globalAlpha=o;n.drawImage(t,r(e,t),u(e,t));n.restore();return e}}function r(e){return n(function(e,t){return e.width-(t.width+10)},function(e,t){return e.height-(t.height+10)},e)}function u(e){return n(function(e,t){return e.width-(t.width+10)},function(e,t){return 10},e)}function o(e){return n(function(e,t){return 10},function(e,t){return e.height-(t.height+10)},e)}function i(e){return n(function(e,t){return 10},function(e,t){return 10},e)}function a(e){return n(function(e,t){return(e.width-t.width)/2},function(e,t){return(e.height-t.height)/2},e)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.atPos=o;t.lowerRight=n;t.lowerLeft=r;t.upperRight=u;t.upperLeft=i;t.center=a;function o(r,u,o,i,a,f){f||(f=1);return function(e){var t=e.getContext("2d");t.save();t.globalAlpha=f;t.fillStyle=a;t.font=i;var n=t.measureText(o);t.fillText(o,r(e,n,t),u(e,n,t));t.restore();return e}}function n(e,t,n,r,u){return o(function(e,t){return e.width-(t.width+10)},function(e){return u||e.height-10},e,t,n,r)}function r(e,t,n,r,u){return o(function(){return 10},function(e){return u||e.height-10},e,t,n,r)}function u(e,t,n,r,u){return o(function(e,t){return e.width-(t.width+10)},function(){return u||20},e,t,n,r)}function i(e,t,n,r,u){return o(function(){return 10},function(){return u||20},e,t,n,r)}function a(e,t,n,r,u){return o(function(e,t,n){n.textAlign="center";return e.width/2},function(e,t,n){n.textBaseline="middle";return e.height/2},e,t,n,r)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.extend=n;t.clone=r;function n(t,n){var e=Object.keys(n);e.forEach(function(e){return t[e]=n[e]});return t}function r(e){return n({},e)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CanvasPool=n;function n(){var r=[];return{pop:function e(){if(this.length===0){r.push(document.createElement("canvas"))}return r.pop()},get length(){return r.length},release:function e(t){var n=t.getContext("2d");n.clearRect(0,0,t.width,t.height);r.push(t)},clear:function e(){r.splice(0,r.length)},get elements(){return r}}}var r=n();t.default=r}])});